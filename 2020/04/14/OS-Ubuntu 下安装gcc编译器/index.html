<!-- build time:Thu Jul 16 2020 12:28:39 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scaleable=0" name="viewport"><title>Focus on FE learning</title><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/third%20party/jquery.fancybox.css"><link rel="stylesheet" href="/css/third%20party/pace-theme-flash.css"><link rel="icon" href="/images/kour.gif"><link href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><meta name="generator" content="Hexo 4.2.0"><link rel="stylesheet" href="/css/prism-xonokai.css" type="text/css"><link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><script src="/js/prism.js"></script><script src="/js/prism-line-numbers.min.js"></script><link rel="stylesheet" href="/css/prism-xonokai.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><script src="/js/prism.js"></script>
<script src="/js/prism-line-numbers.min.js"></script></head><body><header class="header"><div class="header_top"><span class="theme"><a href="/">Chor's blog</a></span><nav class="navbar"><ul class="menu"><li class="menu-item"><i class="fa fa-home"></i> <a href="/" class="menu-item-link">首页</a></li><li class="menu-item"><i class="fa fa-folder-open"></i> <a href="/categories" class="menu-item-link">分类</a></li><li class="menu-item"><i class="fa fa-archive"></i> <a href="/archives" class="menu-item-link">归档</a></li><li class="menu-item"><i class="fa fa-tags"></i> <a href="/tags" class="menu-item-link">标签</a></li><li class="menu-item"><i class="fa fa-user"></i> <a href="/about" class="menu-item-link">关于</a></li></ul></nav></div><i id="homelink" data-link="https://chorer.github.io/"></i><div class="header_bottom"><div class="blog-title"><a href="https://github.com/Chorer/hexo-theme-PureBlue" target="_blank" rel="noopener" class="logo">Focus on FE learning</a><div class="descrs"><div class="descr">个人博客</div><div class="descr">" Do what you love,Love what you do "</div></div><div class="blog-down"><a href="javascript:void(0);"><i class="fa fa-angle-double-down fa-2x"></i></a></div></div></div></header><main class="main"><section class="posts"><article class="post_full"><h1 class="post-title"><div class="post-title-link">Ubuntu下如何更快地安装gcc编译器</div></h1><div class="post-info"><div class="post-date"><i class="fa fa-calendar"></i>&nbsp2020-04-14&nbsp&nbsp&nbsp</div><span class="post-words"><i class="fa fa-pencil-square-o"></i>&nbsp1.4k&nbspwords&nbsp&nbsp </span><span class="post-time"><i class="fa fa-clock-o"></i>&nbsp5 mins&nbsp&nbsp&nbsp</span><div class="post-tags"></div></div><div class="post-content"><p><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/OS-Ubuntu%E4%B8%8B%E5%A6%82%E4%BD%95%E6%9B%B4%E5%BF%AB%E5%9C%B0%E5%AE%89%E8%A3%85gcc%E7%BC%96%E8%AF%91%E5%99%A8/Ubuntu%E4%B8%8B%E5%A6%82%E4%BD%95%E6%9B%B4%E5%BF%AB%E5%9C%B0%E5%AE%89%E8%A3%85gcc%E7%BC%96%E8%AF%91%E5%99%A8-0.png" alt=""></p><a id="more"></a><p>最近操作系统开始上实验课了，瞟了一眼实验目录，看到了“gcc”的字样，一下子勾起了不好的回忆。记得上学期上计组的时候，曾经尝试在自己电脑的虚拟机上安装 gcc ，然而每次的速度都是 0%，几个小时过去了也一动不动，非常让人崩溃。当时知道是软件源的问题，但是不知脑子抽了还是怎么，换源一直失败。后来决定还是用学校机房的电脑得了，于是就一直没管这个问题。不过现在是特殊时期（网课），所有的实验都得在自己电脑上做，所以还是决定花点时间解决这个问题。</p><h3 id="换源"><a href="#换源" class="headerlink" title="换源"></a>换源</h3><p>像往常一样，当我准备用 <code>sudo apt update</code> 查看更新的时候，一如既往卡在了 0% 这里，所以安装 gcc 的第一步是换源。找到 <code>/etc/apt/</code> 文件夹下的 <code>sources.list</code> 文件，这个文件是包管理工具 <code>apt</code> 用来记录软件包仓库位置的配置文件。可以打开看一下，每一行的格式类似 <code>deb http:*//mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse*</code>，<code>deb</code> 是档案类型，中间的是镜像地址，<code>bionic</code> 是版本号，剩下部分的则是软件包分类。</p><p>既然要换源，肯定是得编辑这个文件了。由于这个文件比较重要，所以我们先通过 <code>sudo cp sources.list sources.list.bak</code> 做一下备份。之后当我们想要编辑这个文件的时候，它会提示我们没有权限修改。因为我们默认是普通用户登录，文件对我们只开放 read-only 权限。这里有两种方式可以让我们修改这个文件。</p><h4 id="修改文件读写权限"><a href="#修改文件读写权限" class="headerlink" title="修改文件读写权限"></a>修改文件读写权限</h4><p>简单粗暴的方法，直接使用:</p><pre class="line-numbers language-js"><code class="language-js">sudo chmod <span class="token number">777</span> <span class="token operator">/</span>etc<span class="token operator">/</span>apt<span class="token operator">/</span>sources<span class="token punctuation">.</span>list
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>修改文件权限为最高的 777。文件本来向普通用户只开放只读权限，这样设置就开放了读、写、执行权限，我们就可以修改文件内容了。（不过乱改重要文件的权限好像不太好？）</p><h4 id="root-登录图形界面"><a href="#root-登录图形界面" class="headerlink" title="root 登录图形界面"></a>root 登录图形界面</h4><p>说实话，如果单单为了修改文件而用这个方法的话，很麻烦，而且没有必要。不过，以 root 登录图形界面后，各种文件操作会更加方便（权限都是开放的），而且命令行也不再需要 <code>sudo</code>，所以勉强算是一种解决方法吧。</p><p>为了安全起见，Ubuntu 默认是不允许以 root 登录图形界面的，所以我们要做一些修改。</p><p>第一步：还是以普通用户登录系统，然后通过 <code>sudo passwd root</code> 创建 root 用户的密码（创建过的可以忽略这一步），接着 <code>sudo su</code> 切换到 root 用户。现在，我们的终端就切换到 root 了，不过登录身份还是普通用户。</p><p>第二步：通过 <code>sudo gedit /usr/share/lightdm/lightdm.conf.d/50-ubuntu.conf</code> 以 root 身份打开文件（默认是 read-only，普通用户无法编辑），在文本最后添加如下两行并保存：</p><pre class="line-numbers language-js"><code class="language-js">greeter<span class="token operator">-</span>show<span class="token operator">-</span>manual<span class="token operator">-</span>login<span class="token operator">=</span><span class="token boolean">true</span>
all<span class="token operator">-</span>guest<span class="token operator">=</span><span class="token boolean">false</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>第三步：通过 <code>sudo gedit /etc/pam.d/gdm-autologin</code> 以 root 身份打开文件，注释掉下面这行并保存：</p><pre class="line-numbers language-js"><code class="language-js">auth required pam_succeed_if<span class="token punctuation">.</span>so user <span class="token operator">!=</span> root quiet_success
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>同样的方法打开 <code>gdm-password</code> 文件，注释内容同上。</p><p>第四步：通过 <code>sudo gedit /root/.profile</code> 以 root 身份打开文件，将文件末尾的 <code>mesg n || true</code> 替换成 <code>tty -s&amp;&amp;mesg n || true</code>，再保存。</p><p>第五步：重启系统就 ok 了。默认展示的只有普通用户的用户名，点击下面的 <code>Not listed?</code> 手动输入 root 用户名和对应密码，这样就可以以 root 登录图形界面了。</p><p>之后可以右键查看 <code>sources.list</code> 文件的属性，可以看到我们已经有读写权限了。</p><h3 id="安装-gcc"><a href="#安装-gcc" class="headerlink" title="安装 gcc"></a>安装 gcc</h3><p>接下来就简单了， <code>sources.list</code> 文件里的镜像默认不是国内的，所以我们把里面的内容清空（开头我们备份过了，出事了可以还原回来）。之后的步骤，网上有一些博客可能会说，需要自己手动把国内的镜像地址复制粘贴进去，其实不需要这么麻烦，官方是有提供换源方法的（当然也可以自己去网上找源，这里就不说了）。</p><p>搜索“software &amp; update”（中文版的话是软件与更新“），点击打开。这里可以把第一个选项卡的都勾选上，之后在”download from“这里选择”others“：</p><p><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/OS-Ubuntu%E4%B8%8B%E5%A6%82%E4%BD%95%E6%9B%B4%E5%BF%AB%E5%9C%B0%E5%AE%89%E8%A3%85gcc%E7%BC%96%E8%AF%91%E5%99%A8/Ubuntu%E4%B8%8B%E5%A6%82%E4%BD%95%E6%9B%B4%E5%BF%AB%E5%9C%B0%E5%AE%89%E8%A3%85gcc%E7%BC%96%E8%AF%91%E5%99%A8-1.png" style="zoom:67%"></p><p>这样就会弹出一个下载服务器列表，之后我们就可以手动选择国内的镜像了，比如阿里云。</p><p><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/OS-Ubuntu%E4%B8%8B%E5%A6%82%E4%BD%95%E6%9B%B4%E5%BF%AB%E5%9C%B0%E5%AE%89%E8%A3%85gcc%E7%BC%96%E8%AF%91%E5%99%A8/Ubuntu%E4%B8%8B%E5%A6%82%E4%BD%95%E6%9B%B4%E5%BF%AB%E5%9C%B0%E5%AE%89%E8%A3%85gcc%E7%BC%96%E8%AF%91%E5%99%A8-2.png" style="zoom:67%"></p><p>当然也可以直接点击右侧的”select best server“，这样的话就是自动匹配速度最佳的服务器。这里会花大概几分钟来测试：</p><p><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/OS-Ubuntu%E4%B8%8B%E5%A6%82%E4%BD%95%E6%9B%B4%E5%BF%AB%E5%9C%B0%E5%AE%89%E8%A3%85gcc%E7%BC%96%E8%AF%91%E5%99%A8/Ubuntu%E4%B8%8B%E5%A6%82%E4%BD%95%E6%9B%B4%E5%BF%AB%E5%9C%B0%E5%AE%89%E8%A3%85gcc%E7%BC%96%E8%AF%91%E5%99%A8-3.png" style="zoom:67%"></p><p>之后提醒你 reload，点击确定即可：</p><p><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/OS-Ubuntu%E4%B8%8B%E5%A6%82%E4%BD%95%E6%9B%B4%E5%BF%AB%E5%9C%B0%E5%AE%89%E8%A3%85gcc%E7%BC%96%E8%AF%91%E5%99%A8/Ubuntu%E4%B8%8B%E5%A6%82%E4%BD%95%E6%9B%B4%E5%BF%AB%E5%9C%B0%E5%AE%89%E8%A3%85gcc%E7%BC%96%E8%AF%91%E5%99%A8-4.png" style="zoom:67%"></p><p>现在我们再来 <code>sudo apt update</code>，可以看到速度是非常快的，不存在卡顿的情况（简直太爽了有木有！）：</p><p><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/OS-Ubuntu%E4%B8%8B%E5%A6%82%E4%BD%95%E6%9B%B4%E5%BF%AB%E5%9C%B0%E5%AE%89%E8%A3%85gcc%E7%BC%96%E8%AF%91%E5%99%A8/Ubuntu%E4%B8%8B%E5%A6%82%E4%BD%95%E6%9B%B4%E5%BF%AB%E5%9C%B0%E5%AE%89%E8%A3%85gcc%E7%BC%96%E8%AF%91%E5%99%A8-5.png" style="zoom:67%"></p><p>之后安装 gcc 即可。不过我们这里不直接单独安装 gcc，而是通过 <code>sudo apt install build-essential</code>安装 Ubuntu 提供的 build-essential 软件包，它依赖了 gcc 和 g++，所以只要安装这个包的话，gcc、g++ 这些东西自动也会装上的。</p><p>最后我们再通过 <code>gcc -v</code> 查看是否成功安装了 gcc：</p><p><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/OS-Ubuntu%E4%B8%8B%E5%A6%82%E4%BD%95%E6%9B%B4%E5%BF%AB%E5%9C%B0%E5%AE%89%E8%A3%85gcc%E7%BC%96%E8%AF%91%E5%99%A8/Ubuntu%E4%B8%8B%E5%A6%82%E4%BD%95%E6%9B%B4%E5%BF%AB%E5%9C%B0%E5%AE%89%E8%A3%85gcc%E7%BC%96%E8%AF%91%E5%99%A8-6.png" style="zoom:67%"></p><p>大功告成！</p></div><div class="post-nav"><div class="post-nav-prev"><a href="/2020/04/18/Trs-%E8%B0%81%E5%8A%A8%E4%BA%86%E6%88%91%E7%9A%84%E6%8C%89%E9%92%AE%EF%BC%9F/" rel="prev" title="「译」谁动了我的按钮？ 🧀"><i class="fa fa-angle-double-left"></i>&nbsp「译」谁动了我的按钮？ 🧀</a></div><div class="post-nav-next"><a href="/2020/04/11/CP-%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3%EF%BC%9A%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90%EF%BC%88%E4%B8%80%EF%BC%89/" rel="next" title="编译原理学习笔记-3：词法分析(一)基本过程、正规式和有限自动机">编译原理学习笔记-3：词法分析(一)基本过程、正规式和有限自动机&nbsp<i class="fa fa-angle-double-right"></i></a></div><div class="clear"></div></div></article><div class="post-toc"><div class="toc-top">Contents</div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#换源"><span class="toc-text">换源</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#修改文件读写权限"><span class="toc-text">修改文件读写权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#root-登录图形界面"><span class="toc-text">root 登录图形界面</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装-gcc"><span class="toc-text">安装 gcc</span></a></li></ol></div><div id="vcomments"></div><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script>new Valine({el:"#vcomments",appId:"c9Ume1Givsusy6VyqV87iT2z-gzGzoHsz",appKey:"5F7jhJfENet59xDteaKqobSK",notify:!1,verify:!1,placeholder:"Just talk here......",avatar:"mm",pageSize:10,visitor:!0})</script></section></main><script>var user=[1,2,3,4]</script><footer class="footer"><div class="footer-info"><p>Copyright © 2018 - <span>2020</span> My Blog</p><p class="a">Powered by <a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">Hexo</a> | Theme - <a href="https://github.com/Chorer/hexo-theme-PureBlue" target="_blank" rel="noopener">PureBlue</a></p></div></footer><script src="https://code.jquery.com/jquery-3.3.1.min.js"></script><script src="/js/navbar.js"></script><script src="/js/pace.min.js"></script><script src="/js/code.js"></script><script src="/js/load.js"></script><script src="/js/search.js"></script><script src="/js/post-except.js"></script><script src="/js/jquery.fancybox.js"></script><script src="/js/jquery.fancyboxStart.js"></script><script src="/js/toc.js"></script><script src="/js/jquery.toTop.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.2.0/dist/vanilla-back-to-top.min.js"></script><script src="/js/IndexToTop.js"></script><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5cd8f8959eacf92e"></script></body></html><!-- rebuild by neat -->