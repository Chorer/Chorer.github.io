<!-- build time:Tue Jan 19 2021 23:39:14 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scaleable=0" name="viewport"><title>Focus on FE learning</title><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/third%20party/jquery.fancybox.css"><link rel="stylesheet" href="/css/third%20party/pace-theme-flash.css"><link rel="icon" href="/images/kour.gif"><link href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><meta name="generator" content="Hexo 4.2.0"><link rel="stylesheet" href="/css/prism-xonokai.css" type="text/css"><link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><script src="/js/prism.js"></script><script src="/js/prism-line-numbers.min.js"></script><link rel="stylesheet" href="/css/prism-xonokai.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><script src="/js/prism.js"></script>
<script src="/js/prism-line-numbers.min.js"></script></head><body><header class="header"><div class="header_top"><span class="theme"><a href="/">Chor's blog</a></span><nav class="navbar"><ul class="menu"><li class="menu-item"><i class="fa fa-home"></i> <a href="/" class="menu-item-link">首页</a></li><li class="menu-item"><i class="fa fa-folder-open"></i> <a href="/categories" class="menu-item-link">分类</a></li><li class="menu-item"><i class="fa fa-archive"></i> <a href="/archives" class="menu-item-link">归档</a></li><li class="menu-item"><i class="fa fa-tags"></i> <a href="/tags" class="menu-item-link">标签</a></li><li class="menu-item"><i class="fa fa-user"></i> <a href="/about" class="menu-item-link">关于</a></li></ul></nav></div><i id="homelink" data-link="https://chorer.github.io/"></i><div class="header_bottom"><div class="blog-title"><a href="https://github.com/Chorer/hexo-theme-PureBlue" target="_blank" rel="noopener" class="logo">Focus on FE learning</a><div class="descrs"><div class="descr">个人博客</div><div class="descr">" Do what you love,Love what you do "</div></div><div class="blog-down"><a href="javascript:void(0);"><i class="fa fa-angle-double-down fa-2x"></i></a></div></div></div></header><main class="main"><section class="posts"><article class="post_full"><h1 class="post-title"><div class="post-title-link">concurrently 实现前后端连载启动</div></h1><div class="post-info"><div class="post-date"><i class="fa fa-calendar"></i>&nbsp2020-07-27&nbsp&nbsp&nbsp</div><span class="post-words"><i class="fa fa-pencil-square-o"></i>&nbsp361&nbspwords&nbsp&nbsp </span><span class="post-time"><i class="fa fa-clock-o"></i>&nbsp1 mins&nbsp&nbsp&nbsp</span><div class="post-tags"></div></div><div class="post-content"><a id="more"></a><p>在做一个 Vue + koa2 技术栈的前后端项目时，常常需要通过终端分别启动前端和后端服务，通过安装 <a href="https://www.npmjs.com/package/concurrently" target="_blank" rel="noopener">concurrently</a> 模块，可以做到前后端连载启动。</p><p>以我项目的目录结构为例：</p><pre class="line-numbers language-js"><code class="language-js">Project
<span class="token operator">|</span><span class="token operator">--</span> Front<span class="token operator">-</span>end
    <span class="token operator">|</span><span class="token operator">--</span> <span class="token keyword">package</span><span class="token punctuation">,</span>json
<span class="token operator">|</span><span class="token operator">--</span> Back<span class="token operator">-</span>end
    <span class="token operator">|</span><span class="token operator">--</span> <span class="token keyword">package</span><span class="token punctuation">.</span>json
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>首先来到 <code>Back-end</code> 文件夹下，安装模块：</p><pre class="line-numbers language-shell"><code class="language-shell">npm install concurrently
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>配置前端项目的 <code>package.json</code>：</p><pre class="line-numbers language-json"><code class="language-json">  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"vue-cli-service serve"</span><span class="token punctuation">,</span>
    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"npm run dev"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>配置后端项目的 <code>package.json</code>：</p><pre class="line-numbers language-json"><code class="language-json">  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"client"</span><span class="token operator">:</span> <span class="token string">"npm run start --prefix ../Admin-frontend"</span><span class="token punctuation">,</span>
    <span class="token property">"server"</span><span class="token operator">:</span> <span class="token string">"nodemon app.js"</span><span class="token punctuation">,</span>
    <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"concurrently \"npm run server\" \"npm run client\""</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这样基本就 ok 了，说几个注意事项：</p><ul><li>因为到时候是用 <code>npm run dev</code> 指令一键启动整个项目的，这个指令和前端项目的启动指令冲突了，所以前端项目再配置一个额外的指令 <code>start</code></li><li>执行 <code>npm run dev</code> ，本质上是执行 <code>npm run server</code> 和 <code>npm run client</code>，前者负责用 nodemon + 后端项目入口文件（<code>app.js</code>）启动后端项目，后者负责调用此前前端项目额外配置的启动指令。</li><li><code>client</code> 指令配置的时候需要跟上前端项目根目录的路径。这是一个相对路径，比方说我如果把整个前端项目丢进 <code>Back-end</code> 文件夹，和 <code>package.json</code> 同一个目录，那么我这时候路径就只需要写 <code>Front-end</code> 即可</li></ul><p>最后 <code>npm run dev</code>，看到这样的提示就说明成功了：</p><p><img src="https://i.loli.net/2020/07/27/ToX8LmztbfEqrUI.png" alt=""></p></div><div class="post-nav"><div class="post-nav-prev"><a href="/2020/07/29/F-Vue+Koa%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E9%A1%B9%E7%9B%AE%E7%BA%BF%E4%B8%8A%E9%83%A8%E7%BD%B2/" rel="prev" title="Vue+Koa2 前后端分离项目线上部署"><i class="fa fa-angle-double-left"></i>&nbspVue+Koa2 前后端分离项目线上部署</a></div><div class="post-nav-next"><a href="/2020/07/26/F-%E8%81%8A%E4%B8%80%E8%81%8A%EF%BC%9A%E4%B8%80%E9%81%93%20Promise%20%E9%93%BE%E5%BC%8F%E8%B0%83%E7%94%A8%E7%9A%84%E9%A2%98%E7%9B%AE/" rel="next" title="聊一聊：一道 Promise 链式调用的题目">聊一聊：一道 Promise 链式调用的题目&nbsp<i class="fa fa-angle-double-right"></i></a></div><div class="clear"></div></div></article><div class="post-toc"><div class="toc-top">Contents</div></div><div id="vcomments"></div><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script>new Valine({el:"#vcomments",appId:"c9Ume1Givsusy6VyqV87iT2z-gzGzoHsz",appKey:"5F7jhJfENet59xDteaKqobSK",notify:!1,verify:!1,placeholder:"Just talk here......",avatar:"mm",pageSize:10,visitor:!0})</script></section></main><script>var user=[1,2,3,4]</script><footer class="footer"><div class="footer-info"><p>Copyright © 2018 - <span>2021</span> My Blog</p><p class="a">Powered by <a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">Hexo</a> | Theme - <a href="https://github.com/Chorer/hexo-theme-PureBlue" target="_blank" rel="noopener">PureBlue</a></p></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"></script><script src="/js/navbar.js"></script><script src="/js/pace.min.js"></script><script src="/js/code.js"></script><script src="/js/load.js"></script><script src="/js/search.js"></script><script src="/js/post-except.js"></script><script src="/js/jquery.fancybox.js"></script><script src="/js/jquery.fancyboxStart.js"></script><script src="/js/toc.js"></script><script src="/js/jquery.toTop.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.2.0/dist/vanilla-back-to-top.min.js"></script><script src="/js/IndexToTop.js"></script><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5cd8f8959eacf92e"></script></body></html><!-- rebuild by neat -->