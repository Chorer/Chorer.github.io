<!-- build time:Mon Sep 09 2019 13:20:36 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scaleable=0" name="viewport"><title>Chor&#39;s Blog</title><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/third party/jquery.fancybox.css"><link rel="stylesheet" href="/css/third party/pace-theme-flash.css"><link rel="icon" href="/images/me.gif"><link href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><link rel="stylesheet" href="/css/prism-atom-dark.css" type="text/css"><link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><link rel="stylesheet" href="/css/prism-atom-dark.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head><body><header class="header"><div class="header_top"><span class="theme"><i class="fa fa-bars"></i> <a href="https://github.com/Chorer/hexo-theme-PureBlue">PureBlue</a></span><nav class="navbar"><ul class="menu"><li class="menu-item"><i class="fa fa-home"></i> <a href="/" class="menu-item-link">HOME</a></li><li class="menu-item"><i class="fa fa-folder-open"></i> <a href="/categories" class="menu-item-link">CATEGORIES</a></li><li class="menu-item"><i class="fa fa-archive"></i> <a href="/archives" class="menu-item-link">ARCHIVES</a></li><li class="menu-item"><i class="fa fa-tags"></i> <a href="/tags" class="menu-item-link">TAGS</a></li><li class="menu-item"><i class="fa fa-user"></i> <a href="/about" class="menu-item-link">ABOUT</a></li></ul></nav></div><i id="homelink" data-link="https://chorer.github.io/"></i><div class="header_bottom"><div class="blog-title"><a href="/" class="logo">Chor&#39;s Blog</a><div class="descrs"><div class="descr">个人博客</div><div class="descr">" Do what you love,Love what you do "</div></div></div></div></header><main class="main"><section class="posts"><article class="post_full"><h1 class="post-title"><div class="post-title-link">Vue生命周期与钩子函数</div></h1><div class="post-info"><div class="post-date"><i class="fa fa-calendar"></i>&nbsp2019-09-08&nbsp&nbsp&nbsp</div><span class="post-words"><i class="fa fa-pencil-square-o"></i>&nbsp843&nbspwords&nbsp&nbsp </span><span class="post-time"><i class="fa fa-clock-o"></i>&nbsp3 mins&nbsp&nbsp&nbsp</span><div class="post-tags"><i class="fa fa-tags"></i> <a href="/tags/框架/">框架</a></div></div><div class="post-content"><p><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/Vue%20%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%B8%8E%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0-1.jpg" alt=""><br><a id="more"></a></p><h2 id="1-什么是-Vue-的生命周期？"><a href="#1-什么是-Vue-的生命周期？" class="headerlink" title="1.什么是 Vue 的生命周期？"></a>1.什么是 Vue 的生命周期？</h2><blockquote><p>Vue 实例从创建到销毁的过程，就是生命周期。也就是从开始创建、初始化数据、编译模板、挂载 dom→渲染、更新→渲染、卸载等一系列过程，我们称这是 Vue 的生命周期。</p></blockquote><h2 id="2-Vue-生命周期图"><a href="#2-Vue-生命周期图" class="headerlink" title="2.Vue 生命周期图"></a>2.Vue 生命周期图</h2><p><a href="https://cn.vuejs.org/v2/guide/instance.html" target="_blank" rel="noopener">Vue 官网图片</a>：<br><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/Vue%20%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%B8%8E%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0-2.png" alt=""></p><h2 id="3-生命周期函数"><a href="#3-生命周期函数" class="headerlink" title="3.生命周期函数"></a>3.生命周期函数</h2><p>Vue 的生命周期共有 8 个阶段，即<strong>创建前/后, 载入前/后,更新前/后,销毁前/销毁后</strong>，并对应地有很多钩子函数，让我们在控制整个Vue实例的过程时更容易形成好的逻辑。</p><h2 id="4-生命周期经历的阶段和钩子函数"><a href="#4-生命周期经历的阶段和钩子函数" class="headerlink" title="4 生命周期经历的阶段和钩子函数"></a>4 生命周期经历的阶段和钩子函数</h2><p>根据上面的图来分析 Vue 生命周期的进程：</p><p>1.实例化 Vue（组件）对象，确定 this 指向 Vue 实例<br><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/Vue%20%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%B8%8E%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0-3.png" alt=""></p><p>2.初始化事件（events）和生命周期（cycle）<br><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/Vue%20%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%B8%8E%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0-4.png" alt=""></p><p>3.<span style="color:red">beforeCreate 函数</span><br><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/Vue%20%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%B8%8E%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0-5.png" alt=""><br>这一阶段，虽然 Vue 对象已经创建，但是它的属性还没有绑定，诸如 data、computed 这些属性还没有赋值。所以 $el,$data 以及 message 都是 undefined。</p><p>4.初始化注入和响应<br><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/Vue%20%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%B8%8E%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0-6.png" alt=""><br>这一阶段，Vue 对象的属性注入绑定，完成属性赋值。</p><p>5.<span style="color:red">Created 函数</span><br><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/Vue%20%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%B8%8E%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0-7.png" alt=""><br>这一阶段可以访问数据，但是还没有挂载 dom，不能访问到 $el。因为这个原因，此时改变数据不会触发 updated 函数。</p><p>6.两次判断<br><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/Vue%20%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%B8%8E%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0-8.png" alt=""><br>这个阶段会进行两次判断：</p><ul><li>判断对象是否有 el 选项<br>如果有则继续向下编译；如果没有则停止编译，也即停止生命周期，直到在实例上再次调用 <code>vm.$mount(el)</code> 才会继续向下编译</li><li>判断 el 是否有 template 模板<br>如果有则将该模板编译为渲染函数，最后渲染出来；如果没有则直接调用 $el 的 <strong>outerHTML</strong> 进行渲染。另外，如果 Vue 对象中有渲染函数（render function），则它会优先于 template 进行渲染。<br>综上，优先级是：render function &gt; template &gt; outerHTML</li></ul><p>7.<span style="color:red">beforeMount 函数</span><br><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/Vue%20%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%B8%8E%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0-9.png" alt=""><br>这个阶段，this.$el 有值，但是数据还没有挂载到页面上，`{{}}` 还没有被替换</p><p>8.用vue对象的数据（属性）替换模板中的内容<br><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/Vue%20%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%B8%8E%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0-10.png" alt=""></p><p>9.<span style="color:red">mounted 函数</span><br><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/Vue%20%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%B8%8E%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0-11.png" alt=""><br>模板编译完成，数据挂载完毕，页面上已经能够看到正确的数据了。</p><p>10.<span style="color:red">beforeUpdate 函数</span><br><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/Vue%20%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%B8%8E%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0-12.png" alt=""><br>数据更新后首先触发该函数，但更新的只是数据，innerHTML 尚未更新</p><p>11.虚拟 dom 重新渲染并打补丁<br><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/Vue%20%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%B8%8E%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0-13.png" alt=""></p><p>12.<span style="color:red">updated 函数</span><br><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/Vue%20%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%B8%8E%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0-14.png" alt=""><br>这一阶段，innerHTML 已经得到更新。</p><p>PS：这里解释一个问题。在 beforeUpdate 函数中访问 <code>this.$el，innerHTML</code> 时得到的是旧数据，这是正常的;但访问 <code>this.$el</code> 的时候，得到的却是新数据，这是因为：1.console.log 是异步的，我们期望打印的时候是打印那一刻的快照，但实际上它不能做到这一点，所以在后面点击展开 this.$el 的内容时，实际上只能访问到最新更新的对象；2.this.$el 保存的是对象的引用。</p><p>13.<span style="color:red">beforeDestroy 函数</span><br><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/Vue%20%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%B8%8E%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0-15.png" alt=""><br>这一阶段，实例还没有销毁，仍然完全可用</p><p>14.销毁实例<br><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/Vue%20%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%B8%8E%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0-16.png" alt=""></p><p>14.<span style="color:red">destroyed 函数</span><br><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/Vue%20%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%B8%8E%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0-17.png" alt=""><br>实例销毁之后调用该函数，使 Vue 实例指示的所有东西解绑定，所有的监听器被移除，所有的子实例销毁。</p></div><div class="post-nav"><div class="post-nav-prev"></div><div class="post-nav-next"><a href="/2019/08/06/F-数据类型判断/" rel="next" title="数据类型判断">数据类型判断&nbsp<i class="fa fa-angle-double-right"></i></a></div><div class="clear"></div></div></article><div class="post-toc"><div class="toc-top"><i class="fa fa-th-large"></i>Catalog</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-什么是-Vue-的生命周期？"><span class="toc-text">1.什么是 Vue 的生命周期？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Vue-生命周期图"><span class="toc-text">2.Vue 生命周期图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-生命周期函数"><span class="toc-text">3.生命周期函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-生命周期经历的阶段和钩子函数"><span class="toc-text">4 生命周期经历的阶段和钩子函数</span></a></li></ol></div><div id="vcomments"></div><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script>new Valine({el:"#vcomments",appId:"c9Ume1Givsusy6VyqV87iT2z-gzGzoHsz",appKey:"5F7jhJfENet59xDteaKqobSK",notify:!1,verify:!1,placeholder:"Just talk here......",avatar:"mm",pageSize:10,visitor:!0})</script></section></main><footer class="footer"><div class="footer-info"><p>Copyright © 2018 - 2019 My Blog</p><p class="a">Powered by <a href="https://hexo.io/zh-cn/">Hexo</a> | Theme - <a href="https://github.com/Chorer/hexo-theme-PureBlue">PureBlue</a></p></div></footer><script src="https://code.jquery.com/jquery-3.3.1.min.js"></script><script src="/js/navbar.js"></script><script src="/js/pace.min.js"></script><script src="/js/code.js"></script><script src="/js/load.js"></script><script src="/js/jquery.fancybox.js"></script><script src="/js/jquery.fancyboxStart.js"></script><script src="/js/search.js"></script><script src="/js/toc.js"></script><script src="/js/jquery.toTop.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.2.0/dist/vanilla-back-to-top.min.js"></script><script src="/js/IndexToTop.js"></script><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5cd8f8959eacf92e"></script><script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/tororo.model.json"},display:{position:"left",width:150,height:300,vOffset:-120,hOffset:-5},mobile:{show:!1},react:{opacityDefault:1e3,opacityOnHover:1e3},log:!1})</script></body></html><!-- rebuild by neat -->