<!-- build time:Sat May 25 2019 19:52:42 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=1" name="viewport"><title>Chor&#39;s blog</title><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/third party/jquery.fancybox.css"><link rel="icon" href="/images/me.gif"><link href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><link rel="stylesheet" href="/css/prism-atom-dark.css" type="text/css"><link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><link rel="stylesheet" href="/css/prism-atom-dark.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head><body><header class="header"><span><i class="fa fa-bars"></i> <a href="https://github.com/Chorer/hexo-theme-PureBlue">PureBlue</a></span><div class="blog-title"><a href="/" class="logo">Chor&#39;s blog</a></div><nav class="navbar"><ul class="menu"><li class="menu-item"><a href="/" class="menu-item-link">Home</a></li><li class="menu-item"><a href="/categories" class="menu-item-link">Categories</a></li><li class="menu-item"><a href="/archives" class="menu-item-link">Archives</a></li><li class="menu-item"><a href="/tags" class="menu-item-link">Tags</a></li><li class="menu-item"><a href="/about" class="menu-item-link">About</a></li></ul></nav><span class="local-search local-search-plugin"><i class="fa fa-search"></i> <input type="search" placeholder="Search here......" id="local-search-input" class="local-search-input-cls"><div id="local-search-result" class="local-search-result-cls"></div></span><i id="homelink" data-link="https://chorer.github.io/"></i></header><main class="main"><section class="posts"><article class="post"><div class="post-title"><a class="post-title-link" href="/2019/04/04/P-PureBlue主题更新记录/">PureBlue主题更新记录</a></div><div class="post-sub_title"></div><div class="post-date"><span class="date-text"><i class="fa fa-calendar"></i>Date:&nbsp&nbsp2019-04-04</span></div><div class="post-tags"><span class="post-tags-list"><i class="fa fa-bookmark"></i> Tags:&nbsp&nbsp&nbsp </span><a href="/tags/PureBlue/"><i class="fa fa-tag"></i> PureBlue</a> <a href="/tags/Hexo/"><i class="fa fa-tag"></i> Hexo</a></div><div class="post-statistic"><span class="post-words"><i class="fa fa-pencil-square-o"></i> <span class="text_words">Count: </span><span>1.9k words</span> </span>&nbsp| &nbsp<span class="post-time"> <i class="fa fa-clock-o"></i> <span class="text_time">Time: </span><span>6 mins</span></span></div><div class="post-content"><h2 id="2019-5-21"><a href="#2019-5-21" class="headerlink" title="2019.5.21"></a>2019.5.21</h2><ul><li>代码高亮还是用现成的插件实现的，但是在样式上借鉴了 <a href="https://carbon.now.sh" target="_blank" rel="noopener">Carbon</a>，最主要的是在右上角添加了复制代码功能（有 ZeroClipboard 插件可以用，但是不知怎地用不了，所以自己写了一个。怎么实现的就不说了，因为代码真的很丑）。现在代码高亮效果是这样的：</li></ul><pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="2019-5-19"><a href="#2019-5-19" class="headerlink" title="2019.5.19"></a>2019.5.19</h2><ul><li>修改了配色基调</li><li>添加站内搜索，现在可以搜索文章了</li></ul><h2 id="2019-5-14"><a href="#2019-5-14" class="headerlink" title="2019.5.14"></a>2019.5.14</h2><ul><li>一直觉得banner光秃秃的，所以换上了随机的背景图</li><li>利用媒体查询对手机端的样式做了部分调整（虽然还是没有达到想要的效果）。感觉是个大工程，还是以后再来弄吧。<a id="more"></a></li></ul><h2 id="2019-5-10"><a href="#2019-5-10" class="headerlink" title="2019.5.10"></a>2019.5.10</h2><ul><li>一点小改动。翻译文章时突然发现一件事，有的文章标题下是有类似subtitle的东西的，但不是hexo的内置变量，所以自己定义了一个（说实话之前没考虑到这个问题）。</li></ul><h2 id="2019-4-2"><a href="#2019-4-2" class="headerlink" title="2019.4.2"></a>2019.4.2</h2><ul><li>优化了部分代码</li><li>(总算)引入分享插件，只需要在主题的<code>config.yml</code>文件配置即可。之前以为没法在<code>script</code>标签里写ejs，所以采用了在js里拼接字符串的方法，想想真是又笨又奇葩。</li></ul><h2 id="2019-4-1"><a href="#2019-4-1" class="headerlink" title="2019.4.1"></a>2019.4.1</h2><p>愚人节快乐~~ 几个优化阅读体验的小变动</p><ul><li>引入了font-awesome库，增加了一些图标</li><li>现在TOC目录中的标题会随着屏幕滚动而对应高亮。为了醒目，<del>暂时采用了我比较喜欢的荧光黄</del>采用红色</li><li>取消纯黑字体，现在阅读文章不会那么晃眼了</li><li>修复代码块背景显示不正常的问题</li><li>增加文章字数统计和阅读时长统计，可配置</li></ul><h2 id="2019-3-31"><a href="#2019-3-31" class="headerlink" title="2019.3.31"></a>2019.3.31</h2><p>最近确实还是挺忙的。虽说主题做出来了，但是一些大大小小的毛病或者bug总是让我心里不太舒服，所以花了一些功夫进行了修复，并终于发布了第一个版本。现在看起来已经好很多了（也已经与初版完全不同了）。当然，因为能力不足，所以响应式布局一直没做出来（手机党の噩梦）。</p><h3 id="Version-1-0"><a href="#Version-1-0" class="headerlink" title="Version 1.0"></a>Version 1.0</h3><p><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/%E4%B8%8B%E8%BD%BD.png" alt=""></p><h4 id="整体布局："><a href="#整体布局：" class="headerlink" title="整体布局："></a>整体布局：</h4><p>比较直观的感受应该就是布局上的调整。为了让整体更加趋向扁平化，我去除了初版中所有圆润的元素，尤其是那个巨丑的导航栏。还有一个就是稍微美化了一下滑动条，现在和主题更加搭配了。</p><h4 id="配色："><a href="#配色：" class="headerlink" title="配色："></a>配色：</h4><p>虽然主题叫做PureBlue，但并不是所有人都能接受默认的颜色，所以在以蓝色为主配色的前提下，我提供了其他的几种方案可供选择，只要修改配置文件即可。这个也算是给我的一个tip：为了提高主题的可配置性，应该避免在一些地方采用硬编码，而是代之以变量（stylus本身是支持书写变量的）。</p><h4 id="阅读体验优化："><a href="#阅读体验优化：" class="headerlink" title="阅读体验优化："></a>阅读体验优化：</h4><p>之前比较尴尬的两个问题，一个是图片无法放大查看（= =无法放大的图片要你何用），一个是没有文章目录（阅读长文非常痛苦）。图片问题我是用fancybox插件解决的，同时支持放大、下载和分享。这里有一点比较关键:因为md文件引用的图片默认是放在<code>&lt;p&gt;&lt;/p&gt;</code>中的，而插件针对的图片必须有<code>&lt;a&gt;&lt;/a&gt;</code>嵌套，所以需要用js给所有的img嵌套上<code>&lt;a&gt;&lt;/a&gt;</code>；至于文章目录，可以用TOC函数生成，之后再编写样式就行。当然，目录是类似侧边栏的存在，所以必须用js做一些判断，之后进行适当的定位。</p><h4 id="浏览体验优化："><a href="#浏览体验优化：" class="headerlink" title="浏览体验优化："></a>浏览体验优化：</h4><p>首先是修复了分类页无法正常进入的问题（之前的分类点击之后会走archive页面的布局，所以我暂时给了个空链接）；然后是重写了分页器，说到这个，之前的分页器可以说是丑到无以复加，而且非常不人性化，只提供上一页和下一页的选择简直是不像话有木有！好在这个问题解决了，而且也简化了一些不必要的代码；再者一个是导航栏，导航栏条目可以根据当前所在页面的类型对应高亮。</p><h4 id="第三方插件支持："><a href="#第三方插件支持：" class="headerlink" title="第三方插件支持："></a>第三方插件支持：</h4><p>目前引入了valine评论插件，用起来还是很舒服的。后面看情况可能会增加对gittalk的支持；分享插件，我个人使用的是Addthis，之所以只有个人使用= =，因为这个插件必须要到它的官网去配置，而我要的效果是用户可以通过主题文件进行配置。<del>所以虽然好用，但不会考虑作为主题的分享插件</del> 增加了对Addthis的支持，现在用户可以通过配置pubid使用这个插件了。<del>说到插件，以后也许会增加Algolia站内搜索，现在看搜索功能还是比较鸡肋的，毕竟标签和分类其实已经足够发挥索引功能了</del>增加了本地搜索，用起来感觉还蛮不错。</p><h4 id="其他小改动："><a href="#其他小改动：" class="headerlink" title="其他小改动："></a>其他小改动：</h4><p>显示标签数、分类数和文章数，至于文章阅读时长和字数的统计可以以后再说；还有就是在<code>after-footer.ejs</code>中统一引用所有的js文件，没有之前那么乱糟糟的了；标签云的标签，之前鼠标移入的时候会“鬼畜”，这个问题也得到了修复。</p><p>总而言之改动还是挺大的，不过随着越来越多第三方插件的使用，以后实现去jq化也可能比较麻烦。</p><h4 id="小tip："><a href="#小tip：" class="headerlink" title="小tip："></a>小tip：</h4><p>—-&gt;&gt;最后是一个小tip，如何在js中引用hexo的内置变量：</p><p>这个得从导航栏效果说起，在做导航栏的时候涉及到了怎么区分不同页面的问题。这个其实也很好解决，因为页面链接和导航栏条目是一一对应的，比如archive页面的链接是<code>/archive</code>，导航栏条目是<code>archive</code>,所以做一个判断就好。然而尴尬的是，首页压根就没有这种链接，首页就是一个<code>/</code>（毕竟是作为博客的入口）。所以这个时候我想到了直接通过<code>config.url</code>拿到首页的完整url，之后再做判断，但是又有一个问题——这是hexo的内置变量，只能在ejs中使用，在js里是不识别的。考虑到ejs会生成dom元素，所以解决的思路是：<del>将内置变量存放在dom元素里并生成，之后在js中获取到这个dom元素。因为我们需要的只是它存放的值，所以在页面中再将这个元素<code>display:none</code>掉</del> 直接作为dom元素的<code>data-*</code>属性即可。</p><p>后面还有一个地方用到这个办法，就是TOC的说明文本。TOC作为辅助函数，虽说可以自动生成目录，但是少了提示性文本，比如“文章目录”，所以可以用js动态创建dom元素，并作为TOC的子元素。这里同样不适合采用硬编码的方式写提示文本，所以我将文本写在了配置文件里，之后通过<code>&lt;% __(&#39;....&#39;) %&gt;</code>进行引用——这里和上面一样，同样是<del>将其放在dom元素里</del>作为dom元素的<code>data-*</code>属性，再通过js获取它的值。</p></div></article><div class="post-toc"><div id="post-catalog-text" data-catalog="Article Catalog"></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#2019-5-21"><span class="toc-text">2019.5.21</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2019-5-19"><span class="toc-text">2019.5.19</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2019-5-14"><span class="toc-text">2019.5.14</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2019-5-10"><span class="toc-text">2019.5.10</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2019-4-2"><span class="toc-text">2019.4.2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2019-4-1"><span class="toc-text">2019.4.1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2019-3-31"><span class="toc-text">2019.3.31</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Version-1-0"><span class="toc-text">Version 1.0</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#整体布局："><span class="toc-text">整体布局：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#配色："><span class="toc-text">配色：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#阅读体验优化："><span class="toc-text">阅读体验优化：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#浏览体验优化："><span class="toc-text">浏览体验优化：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#第三方插件支持："><span class="toc-text">第三方插件支持：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#其他小改动："><span class="toc-text">其他小改动：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#小tip："><span class="toc-text">小tip：</span></a></li></ol></li></ol></li></ol><div id="post-toTop-text" data-totop="To the Top"></div></div><div id="vcomments"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script>new Valine({el:"#vcomments",appId:"c9Ume1Givsusy6VyqV87iT2z-gzGzoHsz",appKey:"5F7jhJfENet59xDteaKqobSK",notify:!1,verify:!1,placeholder:"Just talk here......",avatar:"mm",pageSize:10,visitor:!0})</script></section></main><footer class="footer"><div class="footer-info"><p>Copyright © 2018 - 2019 My Blog</p><p class="a">Powered by <a href="https://hexo.io/zh-cn/">Hexo</a> | Theme - <a href="https://github.com/Chorer/hexo-theme-PureBlue">PureBlue</a></p></div></footer><script src="https://code.jquery.com/jquery-3.3.1.min.js"></script><script src="/js/navbar.js"></script><script src="/js/BgPic.js"></script><script src="/js/code.js"></script><script src="/js/load.js"></script><script src="/js/search.js"></script><script src="/js/jquery.fancybox.js"></script><script src="/js/jquery.fancyboxStart.js"></script><script src="/js/toc.js"></script><script src="/js/jquery.toTop.js"></script><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5cd8f8959eacf92e"></script><script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/tororo.model.json"},display:{position:"left",width:150,height:300,vOffset:-120,hOffset:-5},mobile:{show:!1},react:{opacityDefault:1e3,opacityOnHover:1e3},log:!1})</script></body></html><!-- rebuild by neat -->