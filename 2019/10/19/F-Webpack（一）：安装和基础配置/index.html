<!-- build time:Sat Oct 26 2019 11:23:29 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scaleable=0" name="viewport"><title>Chor&#39;s Blog</title><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/third party/jquery.fancybox.css"><link rel="stylesheet" href="/css/third party/pace-theme-flash.css"><link rel="icon" href="/images/me.gif"><link href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><link rel="stylesheet" href="/css/prism-xonokai.css" type="text/css"><link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><script src="/js/prism.js"></script><script src="/js/prism-line-numbers.min.js"></script><link rel="stylesheet" href="/css/prism-xonokai.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><script src="/js/prism.js"></script>
<script src="/js/prism-line-numbers.min.js"></script></head><body><header class="header"><div class="header_top"><span class="theme"><i class="fa fa-bars"></i> <a href="https://github.com/Chorer/hexo-theme-PureBlue">PureBlue</a></span><nav class="navbar"><ul class="menu"><li class="menu-item"><i class="fa fa-home"></i> <a href="/" class="menu-item-link">HOME</a></li><li class="menu-item"><i class="fa fa-folder-open"></i> <a href="/categories" class="menu-item-link">CATEGORIES</a></li><li class="menu-item"><i class="fa fa-archive"></i> <a href="/archives" class="menu-item-link">ARCHIVES</a></li><li class="menu-item"><i class="fa fa-tags"></i> <a href="/tags" class="menu-item-link">TAGS</a></li><li class="menu-item"><i class="fa fa-user"></i> <a href="/about" class="menu-item-link">ABOUT</a></li></ul></nav></div><i id="homelink" data-link="https://chorer.github.io/"></i><div class="header_bottom"><div class="blog-title"><a href="/" class="logo">Chor&#39;s Blog</a><div class="descrs"><div class="descr">个人博客</div><div class="descr">" Do what you love,Love what you do "</div></div></div></div></header><main class="main"><section class="posts"><article class="post_full"><h1 class="post-title"><div class="post-title-link">Webpack（一）：安装和基础配置</div></h1><div class="post-info"><div class="post-date"><i class="fa fa-calendar"></i>&nbsp2019-10-19&nbsp&nbsp&nbsp</div><span class="post-words"><i class="fa fa-pencil-square-o"></i>&nbsp1.1k&nbspwords&nbsp&nbsp </span><span class="post-time"><i class="fa fa-clock-o"></i>&nbsp4 mins&nbsp&nbsp&nbsp</span><div class="post-tags"></div></div><div class="post-content"><p><img src="https://raw.githubusercontent.com/Chorer/MyBlog-Pic/master/Myblogs/webpack学习-0-1.png" alt=""></p><a id="more"></a><p>记录 webpack 安装和配置的过程，以及即将遇到的各种坑. :)</p><p>环境：win10，<a href="mailto:webpack@3.6.0" target="_blank" rel="noopener">webpack@3.6.0</a></p><h2 id="1-webpack-安装"><a href="#1-webpack-安装" class="headerlink" title="1. webpack 安装"></a>1. webpack 安装</h2><h3 id="1-1-安装过程"><a href="#1-1-安装过程" class="headerlink" title="1.1 安装过程"></a>1.1 安装过程</h3><ol><li><p>在安装 webpack 之前，需要先安装 Nodejs（这个过程会自动帮你安装好 npm）。路径的话默认是 C 盘，因为强迫症，我把它安装在了 D 盘。</p></li><li><p>安装好 Nodejs 后，在 cmd 命令行里可以通过 <code>node -v</code> 和 <code>npm -v</code> 分别查看版本信息，一般这里没啥问题。</p></li><li>之后一定不要忘记配置 Nodejs 的环境变量（具体步骤看1.2）</li><li>接着就是安装 webpack 了，因为练手的项目用的是 4.x 之前的版本，我这里用 <code>npm install webpack@3.6.0 -g</code> 进行全局安装。</li><li><code>webpack -v</code> 查看版本信息，没毛病</li></ol><h3 id="1-2-Nodejs-环境变量配置"><a href="#1-2-Nodejs-环境变量配置" class="headerlink" title="1.2 Nodejs 环境变量配置"></a>1.2 Nodejs 环境变量配置</h3><p>之前急着搭建博客，所以 Nodejs 安装好后就没管了，今天 <code>webpack -v</code> 命令死活用不了（提示“webpack 不是内部命令”），才发现是因为当时忘记配置环境变量了。</p><p>分两步：</p><p><strong>（1） 修改全局安装位置</strong></p><p>默认情况下，Nodejs 会给系统环境创建两个环境变量：</p><ul><li>用户变量 PATH： C:\Users\Admin\AppData\Roaming\npm</li><li>系统变量 PATH：D:\Nodejs</li></ul><p>第一个变量指定了全局安装的东西默认存放的位置，因为我实在不想放在 C 盘，于是得改一下这个默认配置，具体做法：</p><ul><li><p>首先在 Nodejs 文件夹中新建 node_global 和 node_cache 文件夹，分别用于存放全局安装包和临时缓存位置；</p></li><li><p>接着 cmd 里设置全局安装路径和全局缓存路径（也就是刚才那两个）：</p></li></ul><pre class="line-numbers language-cmd"><code class="language-cmd">npm config set prefix "D:\Nodejs\node_global"
npm config set cache "D:\Nodejs\node_cache"
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>之后可以用 <code>npm root -g</code> 查看一下</p><p>这之后再次安装 webpack，不出意外它就会出现在 Nodejs/node_global 文件夹下了。不过我们还是查看不了版本，因为环境变量还没修改。</p><p><strong>（2）修改环境变量</strong></p><p>我的电脑——右键属性——高级系统设置——高级———环境变量：</p><ul><li>用户变量：修改 <code>PATH</code> 为 <code>D:\Node.js\node_global</code></li><li>系统变量：新增 <code>NODE_PATH</code> ，设置值为 <code>D:\Node.js\node_global</code></li></ul><p>PS：第二个貌似也可以设置为 <code>D:\Node.js\node_global\node_modules</code></p><p><img src="https://raw.githubusercontent.com/Chorer/MyBlog-Pic/master/Myblogs/webpack学习-1.png" alt=""></p><p>之后重启 cmd （一定要重启，不然是不生效的），再次 <code>webpack -v</code>，这次就可以正常使用了。</p><h2 id="2-基本结构搭建"><a href="#2-基本结构搭建" class="headerlink" title="2. 基本结构搭建"></a>2. 基本结构搭建</h2><p><strong>1.</strong>练手的话先新建一个项目，然后 cd 进去：</p><pre class="line-numbers language-cmd"><code class="language-cmd">mkdir webpack-learning
cd webpack-learning
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>以后就是在这个文件夹里搞事情了。</p><p><strong>2.</strong>创建 <code>index.html</code> 文件和 <code>src</code> 文件夹，后者存放打包前的文件</p><p><strong>3.</strong>通过 <code>npm init</code> 生成 <code>package.json</code> 文件，这个文件用来描述项目信息以及依赖配置等。这里基本一路回车就好。</p><p><strong>4.</strong>通过 <code>npm install webpack@3.6.0 --save -dev</code>本地安装 webpack。本地安装可以让每个项目拥有独立的包，不受全局包的影响，方便项目的移动、复制、打包等 。</p><p><strong>5.</strong>手动创建 <code>webpack.config.js</code> 文件，这个文件用来配置 webpack 的运行方式</p><p>那么，现在项目结构看起来大概如下：</p><p><img src="https://raw.githubusercontent.com/Chorer/MyBlog-Pic/master/Myblogs/webpack学习-2.png" alt=""></p><h2 id="3-配置-webpack-config-js-和-package-json"><a href="#3-配置-webpack-config-js-和-package-json" class="headerlink" title="3. 配置 webpack.config.js 和 package.json"></a>3. 配置 webpack.config.js 和 package.json</h2><p>先简单配置一下 <code>webpack.config.js</code>:</p><pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    entry<span class="token punctuation">:</span><span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
    output<span class="token punctuation">:</span><span class="token punctuation">{</span>
        path<span class="token punctuation">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        filename<span class="token punctuation">:</span><span class="token string">'bundle.js'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这里定义了入口和出口。 入口(entry) 指示 webpack 应该使用哪个模块文件来作为构建内部依赖的开始，进入入口起点后，webpack 会找出有哪些模块和库是入口 js 依赖的；<br>出口(output) 是告诉 webpack 在什么地方输出它所创建的 bundles，以及如何命名这些打包文件。</p><p>我们新建几个文件来简单测试下。首先是<code>module.js</code> :</p><pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    num<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>num<span class="token punctuation">,</span>add<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>main.js</code> 作为入口文件：</p><pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>num<span class="token punctuation">,</span>add<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>将 <code>main.js</code> 进行打包：</p><pre class="line-numbers language-cmd"><code class="language-cmd">$ webpack ./src/main.js ./dist/bundle.js
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>会发现项目文件夹下多出来一个<code>dist</code>文件夹，里面有一个打包生成的 <code>bundle.js</code>文件：</p><p><img src="https://raw.githubusercontent.com/Chorer/MyBlog-Pic/master/Myblogs/webpack学习-3.png" alt=""></p><p>之后在 <code>index.html</code> 中直接引用该文件：</p><pre class="line-numbers language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./dist/bundle.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>浏览器跑一下，没毛病。</p><p>不过，之前的打包命令太麻烦了，所以我们配置一下 <code>package.json</code>：</p><pre class="line-numbers language-js"><code class="language-js"><span class="token string">"scripts"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">"test"</span><span class="token punctuation">:</span> <span class="token string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span><span class="token punctuation">,</span>
    <span class="token string">"build"</span><span class="token punctuation">:</span> <span class="token string">"webpack"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>之后可以直接通过 <code>npm run build</code> 执行打包。</p></div><div class="post-nav"><div class="post-nav-prev"><a href="/2019/10/20/F-Webpack（二）：使用 loader/" rel="prev" title="Webpack（二）：使用 loader"><i class="fa fa-angle-double-left"></i>&nbspWebpack（二）：使用 loader</a></div><div class="post-nav-next"><a href="/2019/10/18/F-前端模块化/" rel="next" title="前端模块化">前端模块化&nbsp<i class="fa fa-angle-double-right"></i></a></div><div class="clear"></div></div></article><div class="post-toc"><div class="toc-top"><i class="fa fa-th-large"></i>Catalog</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-webpack-安装"><span class="toc-text">1. webpack 安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-安装过程"><span class="toc-text">1.1 安装过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-Nodejs-环境变量配置"><span class="toc-text">1.2 Nodejs 环境变量配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-基本结构搭建"><span class="toc-text">2. 基本结构搭建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-配置-webpack-config-js-和-package-json"><span class="toc-text">3. 配置 webpack.config.js 和 package.json</span></a></li></ol></div><div id="vcomments"></div><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script>new Valine({el:"#vcomments",appId:"c9Ume1Givsusy6VyqV87iT2z-gzGzoHsz",appKey:"5F7jhJfENet59xDteaKqobSK",notify:!1,verify:!1,placeholder:"Just talk here......",avatar:"mm",pageSize:10,visitor:!0})</script></section></main><footer class="footer"><div class="footer-info"><p>Copyright © 2018 - 2019 My Blog</p><p class="a">Powered by <a href="https://hexo.io/zh-cn/">Hexo</a> | Theme - <a href="https://github.com/Chorer/hexo-theme-PureBlue">PureBlue</a></p></div></footer><script src="https://code.jquery.com/jquery-3.3.1.min.js"></script><script src="/js/navbar.js"></script><script src="/js/pace.min.js"></script><script src="/js/code.js"></script><script src="/js/load.js"></script><script src="/js/jquery.fancybox.js"></script><script src="/js/jquery.fancyboxStart.js"></script><script src="/js/search.js"></script><script src="/js/post-except.js"></script><script src="/js/toc.js"></script><script src="/js/jquery.toTop.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.2.0/dist/vanilla-back-to-top.min.js"></script><script src="/js/IndexToTop.js"></script><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5cd8f8959eacf92e"></script><script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/tororo.model.json"},display:{position:"left",width:150,height:300,vOffset:-120,hOffset:-5},mobile:{show:!1},react:{opacityDefault:1e3,opacityOnHover:1e3},log:!1})</script></body></html><!-- rebuild by neat -->