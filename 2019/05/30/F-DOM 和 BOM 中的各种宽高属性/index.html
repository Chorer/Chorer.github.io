<!-- build time:Mon Jun 24 2019 21:29:19 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scaleable=0" name="viewport"><title>Chor&#39;s Blog</title><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/third party/jquery.fancybox.css"><link rel="stylesheet" href="/css/third party/pace-theme-flash.css"><link rel="icon" href="/images/me.gif"><link href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><link rel="stylesheet" href="/css/prism-atom-dark.css" type="text/css"><link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><link rel="stylesheet" href="/css/prism-atom-dark.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head><body><header class="header"><span class="theme"><i class="fa fa-bars"></i> <a href="https://github.com/Chorer/hexo-theme-PureBlue">PureBlue</a></span><div class="blog-title"><a href="/" class="logo">Chor&#39;s Blog</a><div class="descrs"><div class="descr">个人博客</div><div class="descr">" Do what you love,Love what you do "</div></div></div><nav class="navbar"><ul class="menu"><li class="menu-item"><i class="fa fa-home"></i> <a href="/" class="menu-item-link">HOME</a></li><li class="menu-item"><i class="fa fa-folder-open"></i> <a href="/categories" class="menu-item-link">CATEGORIES</a></li><li class="menu-item"><i class="fa fa-archive"></i> <a href="/archives" class="menu-item-link">ARCHIVES</a></li><li class="menu-item"><i class="fa fa-tags"></i> <a href="/tags" class="menu-item-link">TAGS</a></li><li class="menu-item"><i class="fa fa-user"></i> <a href="/about" class="menu-item-link">ABOUT</a></li></ul></nav><i id="homelink" data-link="https://chorer.github.io/"></i></header><main class="main"><section class="posts"><article class="post"><h1 class="post-title"><div class="post-title-link">DOM 和 BOM 中的各种宽高属性</div></h1><div class="post-info"><div class="post-date"><i class="fa fa-calendar"></i>&nbsp2019-05-30&nbsp&nbsp&nbsp</div><span class="post-words"><i class="fa fa-pencil-square-o"></i>&nbsp1.5k&nbspwords&nbsp&nbsp </span><span class="post-time"><i class="fa fa-clock-o"></i>&nbsp5 mins&nbsp&nbsp&nbsp</span><div class="post-tags"></div></div><div class="post-content"><p><img src="https://raw.githubusercontent.com/Chorer/MyBlog-Pic/master/Myblogs/各种宽高属性-1.png" alt=""></p><a id="more"></a><ul><li>先区分一下 window 对象和 document 对象：<br>window 对象表示浏览器中打开的窗口，而 document 对象表示整个 html 文档，它是 window 对象的一部分。</li></ul><h2 id="原生-JavaScript"><a href="#原生-JavaScript" class="headerlink" title="原生 JavaScript"></a>原生 JavaScript</h2><h3 id="1-与-window-相关的宽高"><a href="#1-与-window-相关的宽高" class="headerlink" title="1.与 window 相关的宽高"></a>1.与 window 相关的宽高</h3><h4 id="1-1-与窗口相关"><a href="#1-1-与窗口相关" class="headerlink" title="1.1 与窗口相关"></a>1.1 与窗口相关</h4><p><strong><code>window.innerHeight</code>/<code>window.innerWidth</code></strong>:<br>返回表示窗口的内部高度/宽度的数字。不包括开发者工具、顶部栏、侧边栏、滚动条、边框等不由 HTML 控制的部分</p><p><strong><code>window.outerHeight</code>/<code>window.outerWidth</code></strong>：<br>返回表示窗口的外部高度/宽度的数字。包括开发者工具、顶部栏、侧边栏、滚动条、边框等不由 HTML 控制的部分</p><p><img src="https://raw.githubusercontent.com/Chorer/MyBlog-Pic/master/Myblogs/各种宽高属性-2.png" alt=""></p><h4 id="1-2-与屏幕相关"><a href="#1-2-与屏幕相关" class="headerlink" title="1.2 与屏幕相关"></a>1.2 与屏幕相关</h4><p><strong><code>window.screen.width</code>/<code>window.screen.height</code></strong>：<br>返回表示屏幕的宽度/高度的数字。包括可能位于任意一侧的任务栏。这两个属性不受浏览器窗口位置的影响。</p><p><strong><code>window.screen.availHeight</code>/<code>window.screen.availWidth</code></strong>：<br>返回表示屏幕的可用宽度/可用高度的数字。不包括可能位于任意一侧的任务栏。这两个属性不受浏览器窗口位置的影响</p><p><img src="https://raw.githubusercontent.com/Chorer/MyBlog-Pic/master/Myblogs/各种宽高属性-3.jpg" alt=""></p><p><strong><code>window.screenLeft</code>/<code>window.screenTop</code></strong>:<br>返回表示窗口到屏幕距离的数字。无视任务栏。注意：IE 和 Opera 下表示的是窗口文档区到屏幕的距离，这意味着窗口最大化时，<code>screenTop</code> 返回的是窗口顶部栏的高度而不是 0。</p><p>兼容性：主流浏览器均支持，FireFox 浏览器在 v64 之后才支持</p><p><strong><code>window.screenY</code>/<code>window.screenX</code></strong>:<br>返回表示窗口到屏幕距离的数字。<br>兼容性：主流浏览器均支持</p><h3 id="2-与-document-相关的宽高"><a href="#2-与-document-相关的宽高" class="headerlink" title="2.与 document 相关的宽高"></a>2.与 document 相关的宽高</h3><h4 id="2-1-client-系列"><a href="#2-1-client-系列" class="headerlink" title="2.1 client 系列"></a>2.1 client 系列</h4><p><strong><code>element.clientHeight</code>/<code>element.clientWidth</code></strong>：<br>返回元素的可视部分的高度/宽度，且不包括滚动条。即<br><code>clientHeight = height + padding - scrollBar</code><br><code>clientWidth = width + padding - scrollBar</code></p><p><strong><code>element.clientTop</code>/<code>element.clientLeft</code></strong>：<br>返回元素的上边框/左边框厚度。即<br><code>clientTop = borderTop</code><br><code>clientLeft = borderLeft</code></p><h4 id="2-2-offset-系列"><a href="#2-2-offset-系列" class="headerlink" title="2.2 offset 系列"></a>2.2 offset 系列</h4><p><strong><code>element.offsetWidth</code>/<code>element.offsetHeight</code></strong>：<br>返回元素的总高度/总宽度，包括滚动条和边框。即<br><code>offsetWidth = width + padding + border</code><br><code>offsetHeight = height + padding + border</code></p><p>其实这里可以看出来，以 <code>offsetWidth</code> 为例，可以得出：<code>offsetWidth = clientWidth + scrollBar + border</code></p><p><img src="https://raw.githubusercontent.com/Chorer/MyBlog-Pic/master/Myblogs/各种宽高属性-4.jpg" alt=""></p><p><strong><code>element.offsetTop</code>/<code>element.offsetLeft</code></strong><br>首先了解什么是 <code>offsetParent</code>: 它是距离 <code>element</code> 最近的设置了定位的父元素，如果 <code>element</code> 的所有父元素都没有设置定位，则 <code>offsetParent</code> 为 <code>body</code> 元素。</p><pre class="line-numbers language-js"><code class="language-js">element<span class="token punctuation">.</span>offsetTop <span class="token operator">=</span> offsetParent<span class="token punctuation">.</span>marginTop <span class="token operator">+</span> offsetParent<span class="token punctuation">.</span>borderTop <span class="token operator">+</span> offsetParent<span class="token punctuation">.</span>paddingTop <span class="token operator">+</span> element<span class="token punctuation">.</span>marginTop

element<span class="token punctuation">.</span>offsetLeft <span class="token operator">=</span> offsetParent<span class="token punctuation">.</span>marginLeft <span class="token operator">+</span> offsetParent<span class="token punctuation">.</span>borderLeft <span class="token operator">+</span> offsetParent<span class="token punctuation">.</span>paddingLeft <span class="token operator">+</span> element<span class="token punctuation">.</span>marginLeft
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="2-3-scroll-系列"><a href="#2-3-scroll-系列" class="headerlink" title="2.3 scroll 系列"></a>2.3 scroll 系列</h4><p><strong><code>scrollWidth</code>/<code>scrollHeight</code></strong>：</p><p>对于 <code>body</code> 元素，在没有滚动条的情况下：<br><code>body.scrollWidth = window.innerWidth - scrollBar</code><br><code>body.scrollHeight = window.innerHeight - scrollBar</code><br>在有滚动条的情况下：<br><code>body.scrollWidth = width + padding + border + margin</code><br><code>body.scrollHeight = height + padding + border + margin</code></p><p>对于其他元素，在没有滚动条的情况下：<br><code>element.scrollWidth = element.clientWidth</code><br><code>element.scrollHeight = element.clientHeight</code><br>在有滚动条的情况下跟 <code>body</code> 元素是一样的。</p><p><strong><code>element.scrollTop</code>/<code>element.scrollLeft</code></strong>：<br>返回元素在垂直方向或者水平方向上已滚动的距离。<br><img src="https://raw.githubusercontent.com/Chorer/MyBlog-Pic/master/Myblogs/各种宽高属性-5.png" alt=""></p><p>例如，上图中的红框是固定的屏幕可视区，而网页视为可以上下拖动的文档，当滚动条下拉的时候，实际上是文档向上拖动，而这个拖动的距离就是 <code>element.scrollTop</code></p><h4 id="2-4-返回对象系列"><a href="#2-4-返回对象系列" class="headerlink" title="2.4 返回对象系列"></a>2.4 返回对象系列</h4><p><strong><code>element.style.property</code>/<code>element.getBoundingClientRect().property;</code></strong>：</p><p>对于一个 dom 元素，它的 <code>style</code> 属性返回的是一个属性可读写的对象，且属性值常常是带有单位的。注意：这种方式只能够获取元素的行内样式，而并不能获取到元素的最终样式 —— 要获取计算好的样式，使用 <code>element.currentstyle</code>（IE 浏览器）或者 <code>element.getComputedStyle</code>(IE 之外的浏览器)。</p><p>对于一个 dom 元素，它的 <code>getBoundingClientRect()</code> 方法返回的是该元素对应的矩形对象，通过 <code>top</code>，<code>bottom</code>，<code>left</code>，<code>right</code> 可以分别获得该对象各边相对于窗口上边或者左边的距离。如下图：</p><p><img src="https://raw.githubusercontent.com/Chorer/MyBlog-Pic/master/Myblogs/各种宽高属性-6.png" alt=""></p><p>可以看出，假如元素在页面滚动条的拖动下向上移动，则元素的 <code>top</code> 会是负值。</p><h3 id="3-与-event-相关的宽高"><a href="#3-与-event-相关的宽高" class="headerlink" title="3.与 event 相关的宽高"></a>3.与 event 相关的宽高</h3><p>event 对象同样存在着很多位置属性，这些位置属性的参照物都不同。</p><p><strong><code>ev.clientX</code>/<code>ev.clientY</code></strong>：</p><p>事件发生时，鼠标点击位置相对于<strong>浏览器可视区</strong>（不包括滚动条和工具栏）左上角（该点为原点）的坐标。</p><p><strong><code>ev.screenX</code>/<code>ev.screenY</code></strong>：</p><p>事件发生时，鼠标点击位置相对于<strong>设备屏幕</strong>左上角（该点为原点）的坐标</p><p><strong><code>ev.offsetX</code>/<code>ev.offsetY</code></strong>：</p><p>事件发生时，鼠标点击位置相对于<strong>事件源</strong>左上角（该点为原点）的坐标。FireFox 不支持</p><p><strong><code>ev.layerX</code>/<code>ev.layerY</code></strong>：</p><p>事件发生时，鼠标点击位置相对于 <strong><code>document</code></strong> 或者<strong>设置了定位的事件源</strong>左上角（该点为原点）的坐标。仅 FireFox 支持，要想使 <code>layerX</code> 与 <code>offsetX</code> 相等，必须给事件源设置定位。</p><p><strong><code>ev.pageX</code>/<code>ev.pageY</code></strong></p><p>事件发生时，鼠标点击位置相对于<strong>页面</strong>左上角（该点为原点）的坐标。窗口无滚动条时，该属性与 <code>ev.clientX</code>/<code>ev.clientY</code> 等价；窗口出现滚动条时，该属性的值将更大，因为它针对的是整个页面，即包含已滚动的区域。</p><p><img src="https://raw.githubusercontent.com/Chorer/MyBlog-Pic/master/Myblogs/各种宽高属性-7.png" alt=""></p><h2 id="jQuery"><a href="#jQuery" class="headerlink" title="jQuery"></a>jQuery</h2><p><strong><code>width()</code>/<code>height()</code></strong>：<br>无参时返回元素的 content 的宽度/高度，传参时（数字或者函数）设置元素的 content 的宽度/高度。对于 <code>window.document</code> 传参无效，即只支持读不支持写</p><p><strong><code>innerWidth()</code>/<code>innerHeight()</code></strong>：<br>基本同上，不同的是额外包含了元素的 <code>padding</code>，另外不推荐对 <code>window.document</code> 使用这个方法。</p><p><strong><code>outerWidth()</code>/<code>outerHeight()</code></strong>：<br>基本同上，不同的是额外包含了元素的 <code>border</code>，如果传参 <code>true</code>，则还会包含 <code>margin</code>。同样不推荐对 <code>window.document</code> 使用这个方法。</p><p><strong><code>scrollLeft()</code>/<code>scrollTop()</code></strong>：<br>水平方向上或者垂直方向上，滑块相对于整个滚动条的位置。对于某个元素，滑块处于初始位置或者无滚动条时，该方法返回 0。</p><p><strong><code>offset()</code></strong></p><p>返回元素相对于 document (左上角为原点)的当前坐标值，因此即使页面向上拖动，坐标值也不变。</p><p><strong><code>position()</code></strong>:</p><p>返回元素相对于其 <code>offsetParent</code>（(左上角为原点)） 的当前坐标值</p><p>两者区别看下图：</p><p><img src="https://raw.githubusercontent.com/Chorer/MyBlog-Pic/master/Myblogs/各种宽高属性-8.png" alt=""></p><p>参考：<br><a href="https://juejin.im/entry/583a9d4961ff4b007ecbfaff" target="_blank" rel="noopener">https://juejin.im/entry/583a9d4961ff4b007ecbfaff</a><br><a href="https://segmentfault.com/a/1190000007515034" target="_blank" rel="noopener">https://segmentfault.com/a/1190000007515034</a><br><a href="https://www.jianshu.com/p/60332df38393" target="_blank" rel="noopener">https://www.jianshu.com/p/60332df38393</a></p></div><div class="post-nav"><div class="post-nav-prev"><a href="/2019/05/31/F-CSS 基础系列：常见布局方式/" rel="prev" title="CSS 基础系列：常见布局方式"><i class="fa fa-angle-double-left"></i>&nbspCSS 基础系列：常见布局方式</a></div><div class="post-nav-next"><a href="/2019/05/27/Trs-Javascript 究竟是如何工作的？（第二部分）/" rel="next" title="「译」JavaScript 究竟是如何工作的？（第二部分）">「译」JavaScript 究竟是如何工作的？（第二部分）&nbsp<i class="fa fa-angle-double-right"></i></a></div><div class="clear"></div></div></article><div class="post-toc"><div class="toc-top"><i class="fa fa-th-large"></i>Catalog</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#原生-JavaScript"><span class="toc-text">原生 JavaScript</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-与-window-相关的宽高"><span class="toc-text">1.与 window 相关的宽高</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-与窗口相关"><span class="toc-text">1.1 与窗口相关</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-与屏幕相关"><span class="toc-text">1.2 与屏幕相关</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-与-document-相关的宽高"><span class="toc-text">2.与 document 相关的宽高</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-client-系列"><span class="toc-text">2.1 client 系列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-offset-系列"><span class="toc-text">2.2 offset 系列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-scroll-系列"><span class="toc-text">2.3 scroll 系列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-返回对象系列"><span class="toc-text">2.4 返回对象系列</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-与-event-相关的宽高"><span class="toc-text">3.与 event 相关的宽高</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jQuery"><span class="toc-text">jQuery</span></a></li></ol></div><div id="vcomments"></div><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script>new Valine({el:"#vcomments",appId:"c9Ume1Givsusy6VyqV87iT2z-gzGzoHsz",appKey:"5F7jhJfENet59xDteaKqobSK",notify:!1,verify:!1,placeholder:"Just talk here......",avatar:"mm",pageSize:10,visitor:!0})</script></section></main><footer class="footer"><div class="footer-info"><p>Copyright © 2018 - 2019 My Blog</p><p class="a">Powered by <a href="https://hexo.io/zh-cn/">Hexo</a> | Theme - <a href="https://github.com/Chorer/hexo-theme-PureBlue">PureBlue</a></p></div></footer><script src="https://code.jquery.com/jquery-3.3.1.min.js"></script><script src="/js/navbar.js"></script><script src="/js/pace.min.js"></script><script src="/js/code.js"></script><script src="/js/load.js"></script><script src="/js/jquery.fancybox.js"></script><script src="/js/jquery.fancyboxStart.js"></script><script src="/js/search.js"></script><script src="/js/toc.js"></script><script src="/js/jquery.toTop.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.2.0/dist/vanilla-back-to-top.min.js"></script><script src="/js/IndexToTop.js"></script><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5cd8f8959eacf92e"></script><script src="/js/BgPic.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/tororo.model.json"},display:{position:"left",width:150,height:300,vOffset:-120,hOffset:-5},mobile:{show:!1},react:{opacityDefault:1e3,opacityOnHover:1e3},log:!1})</script></body></html><!-- rebuild by neat -->