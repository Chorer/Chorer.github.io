<!-- build time:Sun Dec 05 2021 09:50:01 GMT+0800 (中国标准时间) --><!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scaleable=0" name="viewport"><title>Focus on FE learning</title><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/third%20party/prism.css"><link rel="stylesheet" href="/css/third%20party/jquery.fancybox.css"><link rel="stylesheet" href="/css/third%20party/pace-theme-flash.css"><link rel="icon" href="/images/kour.gif"><link href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><meta name="generator" content="Hexo 5.4.0"></head><body><header class="header"><div class="header_top"><span class="theme"><a href="/">Chor's blog</a></span><nav class="navbar"><ul class="menu"><li class="menu-item"><i class="fa fa-home"></i> <a href="/" class="menu-item-link">首页</a></li><li class="menu-item"><i class="fa fa-folder-open"></i> <a href="/categories" class="menu-item-link">分类</a></li><li class="menu-item"><i class="fa fa-archive"></i> <a href="/archives" class="menu-item-link">归档</a></li><li class="menu-item"><i class="fa fa-tags"></i> <a href="/tags" class="menu-item-link">标签</a></li><li class="menu-item"><i class="fa fa-user"></i> <a href="/about" class="menu-item-link">关于</a></li></ul></nav></div><i id="homelink" data-link="https://chorer.github.io/"></i><div class="header_bottom"><div class="blog-title"><a target="_blank" rel="noopener" href="https://github.com/Chorer/hexo-theme-PureBlue" class="logo">Focus on FE learning</a><div class="descrs"><div class="descr">个人博客</div><div class="descr">" Do what you love,Love what you do "</div></div><div class="blog-down"><a href="javascript:void(0);"><i class="fa fa-angle-double-down fa-2x"></i></a></div></div></div></header><main class="main"><section class="posts"><article class="post_full"><h1 class="post-title"><div class="post-title-link">TypeScript 官方手册翻译计划【八】：类型操控-按索引访问的类型</div></h1><div class="post-info"><div class="post-date"><i class="fa fa-calendar"></i>&nbsp2021-11-27&nbsp&nbsp&nbsp</div><span class="post-words"><i class="fa fa-pencil-square-o"></i>&nbsp556&nbspwords&nbsp&nbsp </span><span class="post-time"><i class="fa fa-clock-o"></i>&nbsp2 mins&nbsp&nbsp&nbsp</span><div class="post-tags"><i class="fa fa-tags"></i> <a href="/tags/TypeScript/">TypeScript</a> <a href="/tags/documentation/">documentation</a></div></div><div class="post-content"><p><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/TypeScript%20%E5%AE%98%E6%96%B9%E6%89%8B%E5%86%8C%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92/banner.jpeg" alt=""></p><span id="more"></span><blockquote><ul><li><strong>说明</strong>：目前网上没有 TypeScript 最新官方文档的中文翻译，所以有了这么一个翻译计划。因为我也是 TypeScript 的初学者，所以无法保证翻译百分之百准确，若有错误，欢迎评论区指出；</li><li><strong>翻译内容</strong>：暂定翻译内容为 <a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/intro.html">TypeScript Handbook</a>，后续有空会补充翻译文档的其它部分；</li><li><strong>项目地址</strong>：<a target="_blank" rel="noopener" href="https://github.com/Chorer/TypeScript-Doc-Zh">TypeScript-Doc-Zh</a>，如果对你有帮助，可以点一个 star ~</li></ul></blockquote><p>本章节官方文档地址：<a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/2/indexed-access-types.html">Indexed Access Type</a></p><h2 id="按索引访问的类型"><a class="markdownIt-Anchor" href="#按索引访问的类型"></a> 按索引访问的类型</h2><p>我们可以访问某个类型上的特定属性，从而获取该属性的类型。这种类型称为按索引访问的类型。</p><pre class="line-numbers language-ts" data-language="ts"><code class="language-ts">type Person &#x3D; &#123; age: number; name: string; alive: boolean &#125;;
type Age &#x3D; Person[&quot;age&quot;];
     ^^^
    &#x2F;&#x2F; type Age &#x3D; number<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>索引类型本身也是一个类型，所以它完全可以和联合类型、<code>keyof</code> 或者其它类型搭配使用：</p><pre class="line-numbers language-ts" data-language="ts"><code class="language-ts">type I1 &#x3D; Person[&quot;age&quot; | &quot;name&quot;];
     ^
    &#x2F;&#x2F; type I1 &#x3D; string | number
 
type I2 &#x3D; Person[keyof Person];
     ^ 
    &#x2F;&#x2F; type I2 &#x3D; string | number | boolean
 
type AliveOrName &#x3D; &quot;alive&quot; | &quot;name&quot;;
type I3 &#x3D; Person[AliveOrName];
      ^ 
    &#x2F;&#x2F; type I3 &#x3D; string | boolean<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>如果尝试索引一个不存在的属性，则会抛出错误：</p><pre class="line-numbers language-ts" data-language="ts"><code class="language-ts">type I1 &#x3D; Person[&quot;alve&quot;];	
			    ^^^^^^			
&#x2F;&#x2F; Property &#39;alve&#39; does not exist on type &#39;Person&#39;.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>此外，我们还可以使用 <code>number</code> 获取数组元素的类型。我们可以将其与 <code>typeof</code> 相结合，方便地捕获数组字面量的元素类型：</p><pre class="line-numbers language-ts" data-language="ts"><code class="language-ts">const MyArray &#x3D; [
  &#123; name: &quot;Alice&quot;, age: 15 &#125;,
  &#123; name: &quot;Bob&quot;, age: 23 &#125;,
  &#123; name: &quot;Eve&quot;, age: 38 &#125;,
];
 
type Person &#x3D; typeof MyArray[number];
     ^^^^^^  
&#x2F;* type Person &#x3D; &#123;
   	    name: string;
        age: number;
   &#125; *&#x2F;
   
type Age &#x3D; typeof MyArray[number][&quot;age&quot;];
     ^^^
   &#x2F;&#x2F; type Age &#x3D; number
&#x2F;&#x2F; 或者
type Age2 &#x3D; Person[&quot;age&quot;];
     ^^^ 
    &#x2F;&#x2F; type Age2 &#x3D; number<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>你只能使用类型作为索引，也就是说，使用 <code>const</code> 创建的变量引用是不能作为索引的：</p><pre class="line-numbers language-ts" data-language="ts"><code class="language-ts">const key &#x3D; &quot;age&quot;;
type Age &#x3D; Person[key];
				^^^^
&#x2F;*                    
Type &#39;key&#39; cannot be used as an index type.
&#39;key&#39; refers to a value, but is being used as a type here. Did you mean &#39;typeof key&#39;?
*&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>不过，你可以改用类型别名重写这段代码：</p><pre class="line-numbers language-ts" data-language="ts"><code class="language-ts">type key &#x3D; &quot;agr&quot;;
type Age &#x3D; Person[key];<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div><div class="post-nav"><div class="post-nav-prev"><a href="/2021/12/02/F-TypeScript%20%E5%AE%98%E6%96%B9%E6%89%8B%E5%86%8C%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92%E3%80%90%E4%B9%9D%E3%80%91%EF%BC%9A%E7%B1%BB%E5%9E%8B%E6%93%8D%E6%8E%A7-%E6%9D%A1%E4%BB%B6%E7%B1%BB%E5%9E%8B/" rel="prev" title="TypeScript 官方手册翻译计划【九】：类型操控-条件类型"><i class="fa fa-angle-double-left"></i>&nbspTypeScript 官方手册翻译计划【九】：类型操控-条件类型</a></div><div class="post-nav-next"><a href="/2021/11/27/F-TypeScript%20%E5%AE%98%E6%96%B9%E6%89%8B%E5%86%8C%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92%E3%80%90%E4%B8%83%E3%80%91%EF%BC%9A%E7%B1%BB%E5%9E%8B%E6%93%8D%E6%8E%A7-%E7%B1%BB%E5%9E%8B%E6%93%8D%E4%BD%9C%E7%AC%A6/" rel="next" title="TypeScript 官方手册翻译计划【七】：类型操控-类型操作符">TypeScript 官方手册翻译计划【七】：类型操控-类型操作符&nbsp<i class="fa fa-angle-double-right"></i></a></div><div class="clear"></div></div></article><div class="post-toc"><div class="toc-top">Contents</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%89%E7%B4%A2%E5%BC%95%E8%AE%BF%E9%97%AE%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-text">按索引访问的类型</span></a></li></ol></div><div id="vcomments"></div><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script>function send_valine_Server(){var e="desp=",t=document.title,n=t.indexOf("|"),a=(t.substring(0,n),document.URL),s=new Date,l=document.getElementsByClassName("vnick vinput")[0].value||"Anonymous",i=(document.getElementsByClassName("vmail vinput")[0].value,document.getElementsByClassName("vlink vinput")[0].value,document.getElementsByClassName("veditor vinput")[0].value),o=e+"文章："+a+"\n\n昵称："+l+"\n\n留言："+i+"\n\n时间："+s.toLocaleString(),v=new XMLHttpRequest;v.open("POST","https://sc.ftqq.com/"+SCKEY_Server+".send",!0),v.setRequestHeader("Content-type","application/x-www-form-urlencoded"),v.send(title1+"&"+o)}new Valine({el:"#vcomments",appId:"c9Ume1Givsusy6VyqV87iT2z-gzGzoHsz",appKey:"5F7jhJfENet59xDteaKqobSK",notify:!1,verify:!1,placeholder:"Just talk here......",avatar:"retro",pageSize:10,visitor:!0});var title1="text=你的博客有新的评论",SCKEY_Server="SCT99005TwWJDrDKdBwQGK0YmcPRAsr4B",ValineButton=document.getElementsByClassName("vsubmit vbtn")[0];ValineButton.onclick=send_valine_Server</script></section></main><script>var user=[1,2,3,4]</script><footer class="footer"><div class="footer-info"><p>Copyright © 2018 - <span>2021</span> My Blog</p><p class="a">Powered by <a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/">Hexo</a> | Theme - <a target="_blank" rel="noopener" href="https://github.com/Chorer/hexo-theme-PureBlue">PureBlue</a></p></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"></script><script src="/js/prism.js"></script><script src="/js/navbar.js"></script><script src="/js/pace.min.js"></script><script src="/js/code.js"></script><script src="/js/load.js"></script><script src="/js/search.js"></script><script src="/js/post-except.js"></script><script src="/js/jquery.fancybox.js"></script><script src="/js/jquery.fancyboxStart.js"></script><script src="/js/toc.js"></script><script src="/js/jquery.toTop.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.2.0/dist/vanilla-back-to-top.min.js"></script><script src="/js/IndexToTop.js"></script><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5cd8f8959eacf92e"></script><script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/tororo.model.json"},display:{position:"left",width:150,height:300,vOffset:-120,hOffset:-5},mobile:{show:!1},react:{opacityDefault:1e3,opacityOnHover:1e3},log:!1})</script></body></html><!-- rebuild by neat -->