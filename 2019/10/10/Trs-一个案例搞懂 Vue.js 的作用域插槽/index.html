<!-- build time:Sun Sep 05 2021 18:35:16 GMT+0800 (中国标准时间) --><!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scaleable=0" name="viewport"><title>Focus on FE learning</title><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/third%20party/prism.css"><link rel="stylesheet" href="/css/third%20party/jquery.fancybox.css"><link rel="stylesheet" href="/css/third%20party/pace-theme-flash.css"><link rel="icon" href="/images/kour.gif"><link href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><meta name="generator" content="Hexo 5.4.0"></head><body><header class="header"><div class="header_top"><span class="theme"><a href="/">Chor's blog</a></span><nav class="navbar"><ul class="menu"><li class="menu-item"><i class="fa fa-home"></i> <a href="/" class="menu-item-link">首页</a></li><li class="menu-item"><i class="fa fa-folder-open"></i> <a href="/categories" class="menu-item-link">分类</a></li><li class="menu-item"><i class="fa fa-archive"></i> <a href="/archives" class="menu-item-link">归档</a></li><li class="menu-item"><i class="fa fa-tags"></i> <a href="/tags" class="menu-item-link">标签</a></li><li class="menu-item"><i class="fa fa-user"></i> <a href="/about" class="menu-item-link">关于</a></li></ul></nav></div><i id="homelink" data-link="https://chorer.github.io/"></i><div class="header_bottom"><div class="blog-title"><a target="_blank" rel="noopener" href="https://github.com/Chorer/hexo-theme-PureBlue" class="logo">Focus on FE learning</a><div class="descrs"><div class="descr">个人博客</div><div class="descr">" Do what you love,Love what you do "</div></div><div class="blog-down"><a href="javascript:void(0);"><i class="fa fa-angle-double-down fa-2x"></i></a></div></div></div></header><main class="main"><section class="posts"><article class="post_full"><h1 class="post-title"><div class="post-title-link">「译」一个案例搞懂 Vue.js 的作用域插槽</div></h1><div class="post-info"><div class="post-date"><i class="fa fa-calendar"></i>&nbsp2019-10-10&nbsp&nbsp&nbsp</div><span class="post-words"><i class="fa fa-pencil-square-o"></i>&nbsp2.1k&nbspwords&nbsp&nbsp </span><span class="post-time"><i class="fa fa-clock-o"></i>&nbsp9 mins&nbsp&nbsp&nbsp</span><div class="post-tags"></div></div><div class="post-content"><div class="figure"><embed src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/%E3%80%8C%E8%AF%91%E3%80%8D%E4%B8%80%E4%B8%AA%E6%A1%88%E4%BE%8B%E6%90%9E%E6%87%82%20Vue.js%20%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD/%E4%B8%80%E4%B8%AA%E6%A1%88%E4%BE%8B%E6%90%9E%E6%87%82%20Vue.js%20%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD-1.webp"></div><span id="more"></span><blockquote><ul><li>原文地址：<a target="_blank" rel="noopener" href="https://vuejsdevelopers.com/2017/10/02/vue-js-scoped-slots/">Getting Your Head Around Vue.js Scoped Slots</a></li><li>原文作者：Anthony Gore</li><li>译者：Chor</li></ul></blockquote><p>作用域插槽是 Vue.js 中一个很有用的特性，可以显著提高组件的通用性和可复用性。问题在于，它实在不太好理解。尝试搞清楚父子作用域之间错综复杂的关系，其痛苦程度不亚于求解一个棘手的数学方程。</p><p>当你无法理解一个东西的时候，最好的办法就是在解决问题的过程中体会它的应用。本文将向你展示如何使用作用域插槽构建一个可复用的列表组件。</p><div class="figure"><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/%E3%80%8C%E8%AF%91%E3%80%8D%E4%B8%80%E4%B8%AA%E6%A1%88%E4%BE%8B%E6%90%9E%E6%87%82%20Vue.js%20%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD/%E4%B8%80%E4%B8%AA%E6%A1%88%E4%BE%8B%E6%90%9E%E6%87%82%20Vue.js%20%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD-2.png"></div><blockquote><p>注意: 完整代码可以去 <a target="_blank" rel="noopener" href="https://codepen.io/anthonygore/pen/zExPZX">Codepen</a> 查看</p></blockquote><h2 id="最基础的组件">最基础的组件</h2><p>我们即将构建的组件叫做 <code>my-list</code> ，用来展示一系列的项目。它的特别之处就在于，你可以在每次使用组件的时候自定义列表项目的渲染方式。</p><p>我们先从最简单的单个列表开始：一个包含几何图形名字和边数的数组。</p><p><em>app.js</em><pre class="line-numbers language-js" data-language="js"><code class="language-js">Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'my-list'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
  template<span class="token operator">:</span> <span class="token string">'#my-list'</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      title<span class="token operator">:</span> <span class="token string">'Shapes'</span><span class="token punctuation">,</span>
      shapes<span class="token operator">:</span> <span class="token punctuation">[</span> 
        <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'Square'</span><span class="token punctuation">,</span> sides<span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> 
        <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'Hexagon'</span><span class="token punctuation">,</span> sides<span class="token operator">:</span> <span class="token number">6</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> 
        <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'Triangle'</span><span class="token punctuation">,</span> sides<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">&#125;</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  el<span class="token operator">:</span> <span class="token string">'#app'</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">    

_index.html_
</span><span class="token template-punctuation string">`</span></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>html
<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span>
  <span class="token operator">&lt;</span>my<span class="token operator">-</span>list<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>my<span class="token operator">-</span>list<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/x-template"</span> id<span class="token operator">=</span><span class="token string">"my-list"</span><span class="token operator">></span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"my-list"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> title <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"list"</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"list-item"</span> v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"shape in shapes"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> shape<span class="token punctuation">.</span>name <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> <span class="token operator">&lt;</span>small<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> shape<span class="token punctuation">.</span>sides <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> sides<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>small<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">    

在加上一点样式，大概就会是下图这个样子：

![](https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/%E3%80%8C%E8%AF%91%E3%80%8D%E4%B8%80%E4%B8%AA%E6%A1%88%E4%BE%8B%E6%90%9E%E6%87%82%20Vue.js%20%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD/%E4%B8%80%E4%B8%AA%E6%A1%88%E4%BE%8B%E6%90%9E%E6%87%82%20Vue.js%20%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD-3.png)

## 更通用的 </span><span class="token template-punctuation string">`</span></span>my<span class="token operator">-</span>list<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">

现在我们想要让 </span><span class="token template-punctuation string">`</span></span>my<span class="token operator">-</span>list<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> 更加通用，可以渲染任何类型的列表。这次我们展示的是一堆颜色的名字以及对应的颜色方块。

为此，我们需要将上例列表独有的数据进行抽象化。由于列表中的项目可能有不同的结构，我们将会给 </span><span class="token template-punctuation string">`</span></span>my<span class="token operator">-</span>list<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> 一个插槽，让父组件来定义列表的展示方式。

_app.js_
</span><span class="token template-punctuation string">`</span></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>js
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'my-list'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
  template<span class="token operator">:</span> <span class="token string">'#my-list'</span><span class="token punctuation">,</span>
  props<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">'title'</span> <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">    

_index.html_
</span><span class="token template-punctuation string">`</span></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>html
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/x-template"</span> id<span class="token operator">=</span><span class="token string">"my-list"</span><span class="token operator">></span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"my-list"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> title <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"list"</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>slot<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">    

现在，我们在根实例中创建 </span><span class="token template-punctuation string">`</span></span>my<span class="token operator">-</span>list<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> 组件的两个实例，分别展示两个测试用例列表：lists:

_app.js_
</span><span class="token template-punctuation string">`</span></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>js
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  el<span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    shapes<span class="token operator">:</span> <span class="token punctuation">[</span> 
      <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'Square'</span><span class="token punctuation">,</span> sides<span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> 
      <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'Hexagon'</span><span class="token punctuation">,</span> sides<span class="token operator">:</span> <span class="token number">6</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> 
      <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'Triangle'</span><span class="token punctuation">,</span> sides<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    colors<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'Yellow'</span><span class="token punctuation">,</span> hex<span class="token operator">:</span> <span class="token string">'#F4D03F'</span><span class="token punctuation">,</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'Green'</span><span class="token punctuation">,</span> hex<span class="token operator">:</span> <span class="token string">'#229954'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'Purple'</span><span class="token punctuation">,</span> hex<span class="token operator">:</span> <span class="token string">'#9B59B6'</span> <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">    
</span><span class="token template-punctuation string">`</span></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>html
<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span>
  <span class="token operator">&lt;</span>my<span class="token operator">-</span>list <span class="token operator">:</span>title<span class="token operator">=</span><span class="token string">"Shapes"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"list-item"</span> v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"item in shapes"</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> shape<span class="token punctuation">.</span>name <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> <span class="token operator">&lt;</span>small<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> shape<span class="token punctuation">.</span>sides <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> sides<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>small<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>my<span class="token operator">-</span>list<span class="token operator">></span>
  <span class="token operator">&lt;</span>my<span class="token operator">-</span>list <span class="token operator">:</span>title<span class="token operator">=</span><span class="token string">"Colors"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"list-item"</span> v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"color in colors"</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>div<span class="token operator">></span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"swatch"</span> <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">"&#123; background: color.hex &#125;"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
        <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> color<span class="token punctuation">.</span>name <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>my<span class="token operator">-</span>list<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">    

效果如下图：

![](https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/%E3%80%8C%E8%AF%91%E3%80%8D%E4%B8%80%E4%B8%AA%E6%A1%88%E4%BE%8B%E6%90%9E%E6%87%82%20Vue.js%20%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD/%E4%B8%80%E4%B8%AA%E6%A1%88%E4%BE%8B%E6%90%9E%E6%87%82%20Vue.js%20%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD-4.png)


## 大材小用的组件

我们刚才创建的组件确实符合要求，但那段代码算不上很好。</span><span class="token template-punctuation string">`</span></span>my<span class="token operator">-</span>list<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> 本来应该是一个展示列表的组件，但我们却把渲染列表需要的逻辑部分抽象到了父组件中，这样一来，子组件在这里只不过是用来包裹列表而已，未免显得大材小用了。

更糟糕的是，在两个组件的声明中存在着大量重复代码（例如，</span><span class="token template-punctuation string">`</span></span><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"list-item"</span> v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"item in ..."</span><span class="token operator">></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">）。如果我们能够在子组件中编写这些代码，那么子组件就不再是“打酱油的角色”了。

## 作用域插槽

普通插槽无法满足我们的需求，这时候，**作用域插槽**就派上用场了。作用域插槽允许你传递一个模板而不是已经渲染好的元素给插槽。之所以叫做”作用域“插槽，是因为模板虽然是在父级作用域中渲染的，却能拿到子组件的数据。

例如，带有作用域插槽的组件 </span><span class="token template-punctuation string">`</span></span>child<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> 大概是下面这个样子：
</span><span class="token template-punctuation string">`</span></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>html
<span class="token operator">&lt;</span>div<span class="token operator">></span>
  <span class="token operator">&lt;</span>slot my<span class="token operator">-</span>prop<span class="token operator">=</span><span class="token string">"Hello from child"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">    

使用这个组件的父组件将会在插槽中声明一个 </span><span class="token template-punctuation string">`</span></span>template<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> 元素。这个模板元素会有一个 </span><span class="token template-punctuation string">`</span></span>scope<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> （译者注：Vue 2.6 后改为 </span><span class="token template-punctuation string">`</span></span>v<span class="token operator">-</span>slot<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> 属性）属性指向一个对象，任何添加到插槽（位于子组件模板）中的属性都会作为这个对象的属性。
</span><span class="token template-punctuation string">`</span></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>html
<span class="token operator">&lt;</span>child<span class="token operator">></span>
  <span class="token operator">&lt;</span>template scope<span class="token operator">=</span><span class="token string">"props"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>span<span class="token operator">></span>Hello from parent<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
    <span class="token operator">&lt;</span>span<span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> props<span class="token punctuation">.</span>my<span class="token operator">-</span>prop <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>child<span class="token operator">></span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">    

将会渲染成：
</span><span class="token template-punctuation string">`</span></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>html
<span class="token operator">&lt;</span>div<span class="token operator">></span>
  <span class="token operator">&lt;</span>span<span class="token operator">></span>Hello from parent<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
  <span class="token operator">&lt;</span>span<span class="token operator">></span>Hello from child<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">    

## 在 </span><span class="token template-punctuation string">`</span></span>my<span class="token operator">-</span>list<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> 中使用作用域插槽

我们将两个列表数组通过 </span><span class="token template-punctuation string">`</span></span>props<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> 传递给 </span><span class="token template-punctuation string">`</span></span>my<span class="token operator">-</span>list<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">。之后将普通插槽替换为作用域插槽，这样，</span><span class="token template-punctuation string">`</span></span>my<span class="token operator">-</span>list<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> 就能够负责迭代列表项目，同时父组件依然能够定义每个项目具体的展示方式。

_index.html_
</span><span class="token template-punctuation string">`</span></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>html
<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span>
  <span class="token operator">&lt;</span>my<span class="token operator">-</span>list title<span class="token operator">=</span><span class="token string">"Shapes"</span> <span class="token operator">:</span>items<span class="token operator">=</span><span class="token string">"shapes"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>在这里书写 template<span class="token operator">--</span><span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>my<span class="token operator">-</span>list<span class="token operator">></span>
  <span class="token operator">&lt;</span>my<span class="token operator">-</span>list title<span class="token operator">=</span><span class="token string">"Colors"</span> <span class="token operator">:</span>items<span class="token operator">=</span><span class="token string">"colors"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>在这里书写 template<span class="token operator">--</span><span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>my<span class="token operator">-</span>list<span class="token operator">></span>   
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">    

接着我们让 </span><span class="token template-punctuation string">`</span></span>my<span class="token operator">-</span>list<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> 迭代项目。在 </span><span class="token template-punctuation string">`</span></span>v<span class="token operator">-</span><span class="token keyword">for</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> 循环中，</span><span class="token template-punctuation string">`</span></span>item<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> 是当前迭代项目的别名。我们可以创建一个插槽并通过 </span><span class="token template-punctuation string">`</span></span>v<span class="token operator">-</span>bind<span class="token operator">=</span><span class="token string">"item"</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> 将那个项目绑定到插槽中。

_app.js_
</span><span class="token template-punctuation string">`</span></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>js
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'my-list'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
  template<span class="token operator">:</span> <span class="token string">'#my-list'</span><span class="token punctuation">,</span>
  props<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'items'</span> <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">    

_index.html_
</span><span class="token template-punctuation string">`</span></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>html
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/x-template"</span> id<span class="token operator">=</span><span class="token string">"my-list"</span><span class="token operator">></span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"my-list"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> title <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"list"</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>div v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"item in items"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>slot v<span class="token operator">-</span>bind<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><blockquote><p>注意：也许你之前没见过不带参数的 <code>v-bind</code> 用法。这种用法将会把整个对象的所以属性都绑定到当前元素上。在涉及作用域插槽时，这种用法很常见，因为绑定的对象可能有很多属性，而一一将它们列举出来并手动绑定显然太麻烦了。</p></blockquote><p>现在，回到根实例这里来，在 <code>my-list</code> 的插槽中声明一个模板。首先看一下几何图形列表（第一个例子中的列表），我们声明的模板必须带有一个 <code>scope</code> 属性，这里将其赋值为 <code>shape</code>。<code>shape</code> 这个别名可以让我们访问作用域插槽。在模板中，我们可以继续沿用最初例子中的标记来展示项目。</p><div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;my-list</span><span class="ot"> title=</span><span class="st">&quot;Shapes&quot;</span><span class="ot"> :items=</span><span class="st">&quot;shapes&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;template</span><span class="ot"> scope=</span><span class="st">&quot;shape&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;div&gt;</span><span class="co">&#123;&#123; shape.name &#125;&#125;</span> <span class="kw">&lt;small&gt;</span>(<span class="co">&#123;&#123; shape.sides &#125;&#125;</span> sides)<span class="kw">&lt;/small&gt;&lt;/div&gt;</span>
  <span class="kw">&lt;/template&gt;</span>
<span class="kw">&lt;/my-list&gt;</span></code></pre></div><p>整个模板大概是下面这样：</p><div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;app&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;my-list</span><span class="ot"> title=</span><span class="st">&quot;Shapes&quot;</span><span class="ot"> :items=</span><span class="st">&quot;shapes&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;template</span><span class="ot"> scope=</span><span class="st">&quot;shape&quot;</span><span class="kw">&gt;</span>
      <span class="kw">&lt;div&gt;</span><span class="co">&#123;&#123; shape.name &#125;&#125;</span> <span class="kw">&lt;small&gt;</span>(<span class="co">&#123;&#123; shape.sides &#125;&#125;</span> sides)<span class="kw">&lt;/small&gt;&lt;/div&gt;</span>
    <span class="kw">&lt;/template&gt;</span>
  <span class="kw">&lt;/my-list&gt;</span>
  <span class="kw">&lt;my-list</span><span class="ot"> title=</span><span class="st">&quot;Colors&quot;</span><span class="ot"> :items=</span><span class="st">&quot;colors&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;template</span><span class="ot"> scope=</span><span class="st">&quot;color&quot;</span><span class="kw">&gt;</span>
      <span class="kw">&lt;div&gt;</span>
        <span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&quot;swatch&quot;</span><span class="ot"> :style=</span><span class="st">&quot;&#123; background: color.hex &#125;&quot;</span><span class="kw">&gt;&lt;/div&gt;</span>
        <span class="co">&#123;&#123; color.name &#125;&#125;</span>
      <span class="kw">&lt;/div&gt;</span>
    <span class="kw">&lt;/template&gt;</span>
  <span class="kw">&lt;/my-list&gt;</span>   
<span class="kw">&lt;/div&gt;</span></code></pre></div><h2 id="结论">结论</h2><p>虽然用上作用域插槽之后，代码量并未减少，但是我们将通用的功能都交由子组件负责，这显著提高了代码的健壮性。</p><p>完整代码的 Codepen 在这里：</p><p>https://codepen.io/anthonygore/pen/zExPZX</p></div><div class="post-nav"><div class="post-nav-prev"><a href="/2019/10/13/F-file%20%E5%8D%8F%E8%AE%AE%E5%AF%BC%E8%87%B4%E7%9A%84%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E4%BB%A5%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" rel="prev" title="file 协议导致的跨域问题以及解决方案"><i class="fa fa-angle-double-left"></i>&nbspfile 协议导致的跨域问题以及解决方案</a></div><div class="post-nav-next"><a href="/2019/10/08/F-Vue%20%E7%BB%84%E4%BB%B6%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E7%BB%84%E4%BB%B6%E6%8F%92%E6%A7%BD/" rel="next" title="Vue 组件（四）：组件插槽">Vue 组件（四）：组件插槽&nbsp<i class="fa fa-angle-double-right"></i></a></div><div class="clear"></div></div></article><div class="post-toc"><div class="toc-top">Contents</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E5%9F%BA%E7%A1%80%E7%9A%84%E7%BB%84%E4%BB%B6"><span class="toc-text">最基础的组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E8%AE%BA"><span class="toc-text">结论</span></a></li></ol></div><div id="vcomments"></div><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script>new Valine({el:"#vcomments",appId:"c9Ume1Givsusy6VyqV87iT2z-gzGzoHsz",appKey:"5F7jhJfENet59xDteaKqobSK",notify:!1,verify:!1,placeholder:"Just talk here......",avatar:"retro",pageSize:10,visitor:!0})</script></section></main><script>var user=[1,2,3,4]</script><footer class="footer"><div class="footer-info"><p>Copyright © 2018 - <span>2021</span> My Blog</p><p class="a">Powered by <a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/">Hexo</a> | Theme - <a target="_blank" rel="noopener" href="https://github.com/Chorer/hexo-theme-PureBlue">PureBlue</a></p></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"></script><script src="/js/navbar.js"></script><script src="/js/pace.min.js"></script><script src="/js/code.js"></script><script src="/js/load.js"></script><script src="/js/search.js"></script><script src="/js/post-except.js"></script><script src="/js/jquery.fancybox.js"></script><script src="/js/jquery.fancyboxStart.js"></script><script src="/js/toc.js"></script><script src="/js/jquery.toTop.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.2.0/dist/vanilla-back-to-top.min.js"></script><script src="/js/IndexToTop.js"></script><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5cd8f8959eacf92e"></script></body></html><!-- rebuild by neat -->