<!-- build time:Mon Apr 01 2019 18:17:45 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scaleable=0" name="viewport"><title>Chor&#39;s Blog</title><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/third party/jquery.fancybox.css"><link rel="icon" href="/images/NARUTO.gif"><link href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><link rel="stylesheet" href="/css/prism-coy.css" type="text/css"><link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><link rel="stylesheet" href="/css/prism-coy.css" type="text/css"><link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head><body><header class="header"><span><i class="fa fa-bars"></i> <a href="https://github.com/Chorer/hexo-theme-PureBlue/tree/master/PureBlue">PureBlue</a></span><div class="blog-title"><a href="/" class="logo">Chor&#39;s Blog</a></div><nav class="navbar"><ul class="menu"><li class="menu-item"><a href="/" class="menu-item-link">Home</a></li><li class="menu-item"><a href="/categories" class="menu-item-link">Categories</a></li><li class="menu-item"><a href="/archives" class="menu-item-link">Archives</a></li><li class="menu-item"><a href="/tags" class="menu-item-link">Tags</a></li><li class="menu-item"><a href="/about" class="menu-item-link">About</a></li></ul></nav><i id="homelink">https://chorer.github.io/</i></header><main class="main"><section class="posts"><article class="post"><div class="post-title"><a class="post-title-link" href="/2019/03/24/T-发布自己的Hexo主题--PureBlue/">折腾博客系列之发布自己的主题：PureBlue</a></div><div class="post-date"><span class="date-text"><i class="fa fa-calendar"></i>Date:&nbsp&nbsp2019-03-24</span></div><div class="post-tags"><span class="post-tags-list"><i class="fa fa-bookmark"></i> Tags:&nbsp&nbsp&nbsp </span><a href="/tags/Hexo/"><i class="fa fa-tag"></i> Hexo</a> <a href="/tags/PureBlue/"><i class="fa fa-tag"></i> PureBlue</a></div><div class="post-statistic"><span class="post-words"><i class="fa fa-pencil-square-o"></i> <span class="text_words">Count: </span><span>2.4k words</span> </span>&nbsp| &nbsp<span class="post-time"> <i class="fa fa-clock-o"></i> <span class="text_time">Time: </span><span>8 mins</span></span></div><div class="post-content"><p>博客内容固然是最重要的，但是抛开内容不讲，博客本身也应该带有自己的Tag，而不是光会用别人的轮子。<br><a id="more"></a><br>最早接触的博客平台是CSDN和博客园，在上面学习到了很多网友的经验，于是萌发了想要创建自己博客的念头，在写了几篇文章后又觉得：为何不自己搭建一个博客平台呢？因此在今年一月份的寒假捣鼓了hexo和github pages，包括下载各种漂亮的主题、添加各种有意思的插件，一时乐在其中。平静下来之后，我开始进行知识迁移的工作，把以前存放在印象笔记中的东西重新修改并整合，转移到个人博客里，于是内容慢慢充实起来。</p><p>直到十几天前，我用的还是Next主题，这的确是一个相当成熟和漂亮的主题，我特别喜欢它的简洁。直到某天看到一句话：</p><blockquote><p>当你看到你用的主题出现在两个以上的博客时，那你就要考虑自己写一个了。</p></blockquote><p>别说两个了，Next主题的用户数应该是目前所有主题中最多的，而博客外观的雷同很显然是一件非常尴尬的事情。正好在那时我也陷入了一个纠结，就是我一直处于知识输入的状态却鲜有项目上的输出，简单地说就是学的多、做的少—-这是很要命的事，毕竟“纸上得来终觉浅”。也就是说我面临两个问题：</p><ul><li>缺少项目实践</li><li>博客主题缺少个性化</li></ul><p>这两个问题恰巧有共同的答案，那就是自己制作一个主题。当时想的是这学期能做出来都算好的了，于是立了一个flag：</p><center><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/1.jpg" width="450" height="120"></center><p>不过很欣慰的是，我赶在月底之前把它完成了，前后大约花了14天。（大概是这个flag给我的动力）</p><center><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/2.jpg" width="400" height="340"></center><p>这是<a href="https://github.com/Chorer/hexo-theme-PureBlue" target="_blank" rel="noopener">项目地址</a>。</p><p>虽然是一个小项目，而且代码也写得比较乱，但是收获颇丰——接触到了两个新的技术，一是模板引擎ejs，二个是css预处理器stylus，还有就是对hexo的原理有了更为深入的理解，至少知道了我写的markdown文件是怎么在网页上渲染出来的，而不是光会用却不知道原理。</p><p>万事开头难，前期准备工作的时候真的是一头雾水。首先是Hexo的官方文档，写得很不友好，所以读起来云里雾里；其次是不同主题使用的模板引擎和css预编译都不同，主题文件的结构也不同，这大大提高了阅读源码的难度和花在上面的时间成本。虽然经过“搜刮”，我找到了几篇教程，但是大部分还是讲的不够浅显易懂，越看越晕。这时候我意识到两个重要的问题：</p><ul><li>这些东西不是给纯新手准备的，我需要先了解基础的概念</li><li>善用搜索引擎，不要将视野局限在国内平台</li></ul><p>所以我开始去youtube上寻找相关的视频，幸运的是我的确找到了<a href="https://www.youtube.com/watch?v=vJsxE6-JXDs&amp;index=16&amp;list=PLLAZ4kZ9dFpOMJR6D25ishrSedvsguVSm" target="_blank" rel="noopener">纯新手向的主题制作教程</a>。每集只有几分钟，但是对于理解一些基础概念来说已经足够。不用担心听不懂，因为自带字幕，再配合up主的操作演示，还是很好理解的。</p><p>之后我又谷歌了相关的文章，成功找到了这个<a href="http://www.codeblocq.com/2016/03/Create-an-Hexo-Theme-Part-1-Index/" target="_blank" rel="noopener">系列教程</a>，这是目前找到的最详细的教程，真真正正的从零开始教你怎么做一个主题，所以说实话真的很感谢这位老外。为了加深对主题制作的理解以及方便其他有需求的人，我将这个系列翻译了过来，可以在我的博客里找到，当然也可以去<a href="https://segmentfault.com/a/1190000018575126" target="_blank" rel="noopener">Segment Fault</a>。目前我只翻译了两篇，第三篇会另外找个时间搞定。</p><p>教程看下来，发现难点主要集中在两个地方：一是理清项目结构，进行合理的组织，二个是设计样式并具体实现。<br>准备工作差不多之后，就可以开始动工了，不需要太着急，每天完成一部分就行。<br>印象比较深的难点就是垂直时间轴的制作，也就是下面这个东西：</p><p><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/3.png" alt=""></p><p>一个是要做出样式，主要涉及伪元素的使用，以及考虑怎么让垂直轴随着页面高度增加而延长；二个是逻辑，遍历所有文章并根据年份进行划分，这里需要使用ejs的语法，对Hexo的内置变量也要熟悉。</p><p>当然，做这个主题的时候也踩了很多坑，这里做一下踩坑记录：</p><ul><li><p>路径问题。为了使代码更容易管理，通常制作主题都是采用模块化的方式，因此存在着大量的文件引用。而A文件引用B文件时，不一定是使用B相对于A的路径，而要看最终A文件被谁引用。</p></li><li><p>某篇文章中出现了一行很长的代码，因为没有对它进行换行和溢出处理，导致图片尺寸无法正常设置，同时所有的文本内容都被挤出div。</p></li><li><p>在本地测试的时候某些文章无法显示全文内容，并且底部div消失。这个问题比较奇葩，而且至今无解。猜想应该是渲染出错还是什么= =。</p></li><li><p>写stylus文件时混用了空格和tab，git报错。（这个是真的坑，开了sublime的提示才看出来的）</p></li><li><p>第三方插件失效。返回顶部按钮是用的第三方jq插件，坑的地方就在于，作者引用jq库时是用的http链接，被浏览器阻止了，导致插件失效。一开始以为是缓存问题导致的样式无法修改，在反复修改和刷新了一个半小时后才想到去控制台看报错信息：<br><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/QQ%E6%88%AA%E5%9B%BE20190322212018.png" alt=""><br>所以，为了保险一点还是在项目中放jq文件比较好，当然更好的做法应该是直接用原生js来写。</p></li><li><p>改动不生效的问题。比较常见的状况，在本地预览一切正常，通过域名访问的时候改动却迟迟没有生效，而且通常的清除浏览器缓存或者<code>hexo clean</code>还不一定有效。只能说改动的同步还是需要时间的= =</p></li><li><p>page页面共用。这个严格来说不算坑，而是应该留意的一个地方。Hexo中并没有专门的展示所有标签或者所有类别的页面，拿我用的ejs来说，layout文件夹下的tag.ejs实际指的是单一标签下的所有文章，同理categories.ejs指的是单一类别下的所有文章。而我们需要的展示页面实际上是统一放在page.ejs中，再根据条件判断生成对应页面。不过我实际操作的时候发现分类页走的是归档页的布局。<del>所以目前这个主题的分类页无法正常工作，也许之后会找到原因吧</del>问题已解决，目前分类页可以正常工作。</p></li></ul><p>主题基本的东西都做好了，剩下的就是上传到github，并且向Hexo官方站点发起pull request—-这些对于我这个菜鸟来说还很陌生，所以不得不去b站找了github和git使用的相关教程。本来应该一切顺利了，但是本地这边一直无法推送到远程仓库，查了很久才发现是两边文件不一致的问题 = = 。</p><p>当然，git和github是每个技术人的必备技能，所以之后我会另外找个时间系统学习一下这两者的使用。</p><p>最后当然就是编写说明文档了，很神奇的是在编写的时候不由得想起以前做汉化时写的使用说明。这两者还是有共同之处的，因为你是要写给别人看，所以你必须确保描述清晰和完整——想象自己是一个用户，如果阅读这份文档后没有使用上的疑惑，我觉得就可以了。</p><p>感触比较深的两点：一个是注意阅读源码。如果实在没有思路，可以先参考别人是怎么写的，一开始制作主题的时候很难理清项目结构，所以我选择了先看看别人是怎么写的；二个是英语的重要性——1/5的答案在百度，4/5的答案在谷歌，学会英语就意味着你找到了解决问题的另一条途径，而且无疑是更加宽广的途径。比如Hexo主题的制作，国内是没有人真的会去为这个而做系列视频的，但是国外有；同样地，提问题时也可以考虑选择国外平台，如果你注意了提问礼仪，很大几率问题会得到秒回。</p><p>到这里差不多就告一段落了，之后的时间我会慢慢完善和更新这个主题。目前来说用户只有我自己，所以也算是为我自己而去努力地塑造它吧。</p></div></article><div class="post-toc"><div id="post-catalog-text">Article Catalog</div><div id="post-toTop-text">To the Top</div></div><div id="vcomments"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script>new Valine({el:"#vcomments",appId:"c9Ume1Givsusy6VyqV87iT2z-gzGzoHsz",appKey:"5F7jhJfENet59xDteaKqobSK",notify:!1,verify:!1,placeholder:"Just talk here......",avatar:"mm",pageSize:10,visitor:!0})</script></section></main><footer class="footer"><div class="footer-info"><p>Copyright © 2018 - 2019 My Blog</p><p class="a">Powered by <a href="https://hexo.io/zh-cn/">Hexo</a> | Theme - <a href="https://github.com/Chorer/hexo-theme-PureBlue/tree/master/PureBlue">PureBlue</a></p></div></footer><script src="https://code.jquery.com/jquery-3.3.1.min.js"></script><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5c5ffe9669609061"></script><script src="/js/navbar.js"></script><script src="/js/jquery.fancybox.js"></script><script src="/js/jquery.fancyboxStart.js"></script><script src="/js/toc.js"></script><script src="/js/jquery.toTop.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"left","width":150,"height":300,"vOffset":-120,"hOffset":-5},"mobile":{"show":false},"react":{"opacityDefault":1000,"opacityOnHover":1000},"log":false});</script></body></html><!-- rebuild by neat -->