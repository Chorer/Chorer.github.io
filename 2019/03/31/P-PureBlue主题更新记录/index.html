<!-- build time:Sun Mar 31 2019 23:27:59 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scaleable=0" name="viewport"><title>Chor&#39;s Blog</title><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/third party/jquery.fancybox.css"><link rel="icon" href="/images/NARUTO.gif"><link href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><link rel="stylesheet" href="/css/prism-coy.css" type="text/css"><link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><link rel="stylesheet" href="/css/prism-coy.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head><body><header class="header"><span><i class="fa fa-bars"></i> <a href="https://github.com/Chorer/hexo-theme-PureBlue/tree/master/PureBlue">PureBlue</a></span><div class="blog-title"><a href="/" class="logo">Chor&#39;s Blog</a></div><nav class="navbar"><ul class="menu"><li class="menu-item"><a href="/" class="menu-item-link">Home</a></li><li class="menu-item"><a href="/categories" class="menu-item-link">Categories</a></li><li class="menu-item"><a href="/archives" class="menu-item-link">Archives</a></li><li class="menu-item"><a href="/tags" class="menu-item-link">Tags</a></li><li class="menu-item"><a href="/about" class="menu-item-link">About</a></li></ul></nav><i id="homelink">https://chorer.github.io/</i></header><main class="main"><section class="posts"><article class="post"><div class="post-title"><a class="post-title-link" href="/2019/03/31/P-PureBlue主题更新记录/">PureBlue主题更新记录</a></div><div class="post-time"><span class="time-text"><i class="fa fa-calendar"></i>Date:&nbsp </span><span class="time">2019-03-31</span></div><div class="post-tags"><span class="post-tags-list"><i class="fa fa-bookmark"></i> Tags:&nbsp&nbsp&nbsp </span><a href="/tags/PureBlue/"><i class="fa fa-tag"></i> PureBlue</a> <a href="/tags/Hexo/"><i class="fa fa-tag"></i> Hexo</a></div><div class="post-content"><p>最近确实还是挺忙的。虽说主题做出来了，但是一些大大小小的毛病或者bug总是让我心里不太舒服，所以花了一些功夫进行了修复，并终于发布了第一个版本。现在看起来已经好很多了（也已经与初版完全不同了）。当然，因为能力不足，所以响应式布局一直没做出来（手机党の噩梦）。<br><a id="more"></a></p><h3 id="Version-1-0"><a href="#Version-1-0" class="headerlink" title="Version 1.0"></a>Version 1.0</h3><p><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/%E4%B8%8B%E8%BD%BD.png" alt=""></p><h4 id="整体布局："><a href="#整体布局：" class="headerlink" title="整体布局："></a>整体布局：</h4><p>比较直观的感受应该就是布局上的调整。为了让整体更加趋向扁平化，我去除了初版中所有圆润的元素，尤其是那个巨丑的导航栏。还有一个就是稍微美化了一下滑动条，现在和主题更加搭配了。</p><h4 id="配色："><a href="#配色：" class="headerlink" title="配色："></a>配色：</h4><p>虽然主题叫做PureBlue，但并不是所有人都能接受默认的颜色，所以在以蓝色为主配色的前提下，我提供了其他的几种方案可供选择，只要修改配置文件即可。这个也算是给我的一个tip：为了提高主题的可配置性，应该避免在一些地方采用硬编码，而是代之以变量（stylus本身是支持书写变量的）。</p><h4 id="阅读体验优化："><a href="#阅读体验优化：" class="headerlink" title="阅读体验优化："></a>阅读体验优化：</h4><p>之前比较尴尬的两个问题，一个是图片无法放大查看（= =无法放大的图片要你何用），一个是没有文章目录（阅读长文非常痛苦）。图片问题我是用fancybox插件解决的，同时支持放大、下载和分享。这里有一点比较关键:因为md文件引用的图片默认是放在<code>&lt;p&gt;&lt;/p&gt;</code>中的，而插件针对的图片必须有<code>&lt;a&gt;&lt;/a&gt;</code>嵌套，所以需要用js给所有的img嵌套上<code>&lt;a&gt;&lt;/a&gt;</code>；至于文章目录，可以用TOC函数生成，之后再编写样式就行。当然，目录是类似侧边栏的存在，所以必须用js做一些判断，之后进行适当的定位。</p><h4 id="浏览体验优化："><a href="#浏览体验优化：" class="headerlink" title="浏览体验优化："></a>浏览体验优化：</h4><p>首先是修复了分类页无法正常进入的问题（之前的分类点击之后会走archive页面的布局，所以我暂时给了个空链接）；然后是重写了分页器，说到这个，之前的分页器可以说是丑到无以复加，而且非常不人性化，只提供上一页和下一页的选择简直是不像话有木有！好在这个问题解决了，而且也简化了一些不必要的代码；再者一个是导航栏，导航栏条目可以根据当前所在页面的类型对应高亮。</p><h4 id="第三方插件支持："><a href="#第三方插件支持：" class="headerlink" title="第三方插件支持："></a>第三方插件支持：</h4><p>目前引入了valine评论插件，用起来还是很舒服的。后面看情况可能会增加对gittalk的支持；分享插件，我个人使用的是Addthis，之所以只有个人使用= =，因为这个插件必须要到它的官网去配置，而我要的效果是用户可以通过主题文件进行配置。所以虽然好用，但不会考虑作为主题的分享插件。说到插件，以后也许会增加Algolia站内搜索，现在看搜索功能还是比较鸡肋的，毕竟标签和分类其实已经足够起到索引功能了。</p><h4 id="其他小改动："><a href="#其他小改动：" class="headerlink" title="其他小改动："></a>其他小改动：</h4><p>显示标签数、分类数和文章数，至于文章阅读时长和字数的统计可以以后再说；还有就是在<code>after-footer.ejs</code>中统一引用所有的js文件，没有之前那么乱糟糟的了；标签云的标签，之前鼠标移入的时候会“鬼畜”，这个问题也得到了修复。</p><p>总而言之改动还是挺大的，不过随着越来越多第三方插件的使用，去jq化貌似也变得遥遥无期了，这可能就是代价吧，= =</p><h4 id="小tip："><a href="#小tip：" class="headerlink" title="小tip："></a>小tip：</h4><p>—-&gt;&gt;最后是一个小tip，如何在js中引用hexo的内置变量：</p><p>这个得从导航栏效果说起，在做导航栏的时候涉及到了怎么区分不同页面的问题。这个其实也很好解决，因为页面链接和导航栏条目是一一对应的，比如archive页面的链接是<code>/archive</code>，导航栏条目是<code>archive</code>,所以做一个判断就好。然而尴尬的是，首页压根就没有这种链接，首页就是一个<code>/</code>（毕竟是作为博客的入口）。所以这个时候我想到了直接通过<code>config.url</code>拿到首页的完整url，之后再做判断，但是又有一个问题——这是hexo的内置变量，只能在ejs中使用，在js里是不识别的。考虑到ejs会生成dom元素，所以解决的思路是：将内置变量存放在dom元素里并生成，之后在js中获取到这个dom元素。因为我们需要的只是它存放的值，所以在页面中再将这个元素<code>display:none</code>掉。</p><p>后面还有一个地方用到这个办法，就是TOC的说明文本。TOC作为辅助函数，虽说可以自动生成目录，但是少了提示性文本，比如“文章目录”，所以可以用js动态创建dom元素，并作为TOC的子元素。这里同样不适合采用硬编码的方式写提示文本，所以我将文本写在了配置文件里，之后通过<code>&lt;% __(&#39;....&#39;) %&gt;</code>进行引用——这里和上面一样，同样是将其放在dom元素里，再通过js获取它的值。</p></div></article><div class="post-toc"><div id="post-catalog-text">Article Catalog</div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Version-1-0"><span class="toc-text">Version 1.0</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#整体布局："><span class="toc-text">整体布局：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#配色："><span class="toc-text">配色：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#阅读体验优化："><span class="toc-text">阅读体验优化：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#浏览体验优化："><span class="toc-text">浏览体验优化：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#第三方插件支持："><span class="toc-text">第三方插件支持：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#其他小改动："><span class="toc-text">其他小改动：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#小tip："><span class="toc-text">小tip：</span></a></li></ol></li></ol><div id="post-toTop-text">To the Top</div></div><div id="vcomments"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script>new Valine({el:"#vcomments",appId:"c9Ume1Givsusy6VyqV87iT2z-gzGzoHsz",appKey:"5F7jhJfENet59xDteaKqobSK",notify:!1,verify:!1,placeholder:"Just talk here......",avatar:"mm",pageSize:10,visitor:!0})</script></section></main><footer class="footer"><div class="footer-info"><p>Copyright © 2018 - 2019 Chor's Blog</p><p class="a">Powered by <a href="https://hexo.io/zh-cn/">Hexo</a> | Theme - <a href="https://github.com/Chorer/hexo-theme-PureBlue/tree/master/PureBlue">PureBlue</a></p></div></footer><script src="https://code.jquery.com/jquery-3.3.1.min.js"></script><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5c5ffe9669609061"></script><script src="/js/navbar.js"></script><script src="/js/jquery.fancybox.js"></script><script src="/js/jquery.fancyboxStart.js"></script><script src="/js/toc.js"></script><script src="/js/jquery.toTop.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/tororo.model.json"},display:{position:"left",width:150,height:300,vOffset:-120,hOffset:-5},mobile:{show:!1},react:{opacityDefault:1e3,opacityOnHover:1e3},log:!1})</script></body></html><!-- rebuild by neat -->