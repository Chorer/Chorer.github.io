<!-- build time:Sat Dec 04 2021 16:42:32 GMT+0800 (中国标准时间) --><!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scaleable=0" name="viewport"><title>Focus on FE learning</title><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/third%20party/prism.css"><link rel="stylesheet" href="/css/third%20party/jquery.fancybox.css"><link rel="stylesheet" href="/css/third%20party/pace-theme-flash.css"><link rel="icon" href="/images/kour.gif"><link href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><meta name="generator" content="Hexo 5.4.0"></head><body><header class="header"><div class="header_top"><span class="theme"><a href="/">Chor's blog</a></span><nav class="navbar"><ul class="menu"><li class="menu-item"><i class="fa fa-home"></i> <a href="/" class="menu-item-link">首页</a></li><li class="menu-item"><i class="fa fa-folder-open"></i> <a href="/categories" class="menu-item-link">分类</a></li><li class="menu-item"><i class="fa fa-archive"></i> <a href="/archives" class="menu-item-link">归档</a></li><li class="menu-item"><i class="fa fa-tags"></i> <a href="/tags" class="menu-item-link">标签</a></li><li class="menu-item"><i class="fa fa-user"></i> <a href="/about" class="menu-item-link">关于</a></li></ul></nav></div><i id="homelink" data-link="https://chorer.github.io/"></i><div class="header_bottom"><div class="blog-title"><a target="_blank" rel="noopener" href="https://github.com/Chorer/hexo-theme-PureBlue" class="logo">Focus on FE learning</a><div class="descrs"><div class="descr">个人博客</div><div class="descr">" Do what you love,Love what you do "</div></div><div class="blog-down"><a href="javascript:void(0);"><i class="fa fa-angle-double-down fa-2x"></i></a></div></div></div></header><main class="main"><section class="posts"><article class="post_full"><h1 class="post-title"><div class="post-title-link">TypeScript 官方手册翻译计划【七】：类型操控-类型操作符</div></h1><div class="post-info"><div class="post-date"><i class="fa fa-calendar"></i>&nbsp2021-12-03&nbsp&nbsp&nbsp</div><span class="post-words"><i class="fa fa-pencil-square-o"></i>&nbsp843&nbspwords&nbsp&nbsp </span><span class="post-time"><i class="fa fa-clock-o"></i>&nbsp3 mins&nbsp&nbsp&nbsp</span><div class="post-tags"><i class="fa fa-tags"></i> <a href="/tags/TypeScript/">TypeScript</a> <a href="/tags/documentation/">documentation</a></div></div><div class="post-content"><p><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/TypeScript%20%E5%AE%98%E6%96%B9%E6%89%8B%E5%86%8C%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92/banner.jpeg" alt=""></p><span id="more"></span><blockquote><ul><li><strong>说明</strong>：目前网上没有 TypeScript 最新官方文档的中文翻译，所以有了这么一个翻译计划。因为我也是 TypeScript 的初学者，所以无法保证翻译百分之百准确，若有错误，欢迎评论区指出；</li><li><strong>翻译内容</strong>：暂定翻译内容为 <a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/intro.html">TypeScript Handbook</a>，后续有空会补充翻译文档的其它部分；</li><li><strong>项目地址</strong>：<a target="_blank" rel="noopener" href="https://github.com/Chorer/TypeScript-Doc-Zh">TypeScript-Doc-Zh</a>，如果对你有帮助，可以点一个 star ~</li></ul></blockquote><p>本章节官方文档地址：<a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/2/keyof-types.html">Keyof Type Operator</a>、<a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/2/typeof-types.html">Typeof Type Operator</a></p><h2 id="keyof-类型操作符"><a class="markdownIt-Anchor" href="#keyof-类型操作符"></a> Keyof 类型操作符</h2><h3 id="keyof-类型操作符-2"><a class="markdownIt-Anchor" href="#keyof-类型操作符-2"></a> <code>keyof</code> 类型操作符</h3><p><code>keyof</code> 类型操作符接受一个对象类型作为参数，并基于它的键产生一个由字符串字面量或者数值字面量组成的联合类型。下面的类型 <code>P</code> 等同于类型 <code>&quot;x&quot; | &quot;y&quot;</code>：</p><pre class="line-numbers language-ts" data-language="ts"><code class="language-ts">type Point &#x3D; &#123; x: number; y: number &#125;;
type P &#x3D; keyof Point;
	^
   &#x2F;&#x2F; type P &#x3D; keyof Point     <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>如果 <code>keyof</code> 操作的类型有 <code>string</code> 或者 <code>number</code> 类型的索引签名，那么 <code>keyof</code> 会返回该索引签名的类型：</p><pre class="line-numbers language-ts" data-language="ts"><code class="language-ts">type Arrayish &#x3D; &#123; [n: number]: unknown &#125;;
type A &#x3D; keyof Arrayish;
     ^
   &#x2F;&#x2F; type A &#x3D; number
 
type Mapish &#x3D; &#123; [k: string]: boolean &#125;;
type M &#x3D; keyof Mapish;
     ^
   &#x2F;&#x2F; type M &#x3D; string | number<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>注意，在这个例子中，<code>M</code> 表示的类型是 <code>string | number</code> —— 这是因为 JavaScript 对象的键总是会被强制转化为一个字符串，因此 <code>obj[0]</code> 等同于 <code>obj[&quot;0&quot;]</code>。</p><p><code>keyof</code> 类型和映射类型结合的时候会发挥很大的作用，后续的章节我们也会进行介绍。</p><h2 id="typeof-类型操作符"><a class="markdownIt-Anchor" href="#typeof-类型操作符"></a> Typeof 类型操作符</h2><h3 id="typeof-类型操作符-2"><a class="markdownIt-Anchor" href="#typeof-类型操作符-2"></a> <code>typeof</code> 类型操作符</h3><p>JavaScript 中本身就有一个可用于表达式上下文的 <code>typeof</code> 操作符：</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 打印 "string"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token string">"Hello world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>TypeScript 则添加了一个可用于类型上下文的 <code>typeof</code> 操作符，让你可以引用某个变量或者属性的类型：</p><pre class="line-numbers language-ts" data-language="ts"><code class="language-ts">let s &#x3D; &quot;hello&quot;;
let n: typeof s;
	^
    &#x2F;&#x2F; let n: string<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>像上面这样用于基本类型，作用并不是很大，但如果把 <code>typeof</code> 和其它类型操作符结合使用，就可以方便地表示多种模式了。举个例子，我们先来看一下预定义类型 <code>ReturnType&lt;T&gt;</code>。它可以接受一个函数类型并将它的返回值类型返回出去：</p><pre class="line-numbers language-ts" data-language="ts"><code class="language-ts">type Predicate &#x3D; (x: unknown) &#x3D;&gt; boolean;
type K &#x3D; ReturnType&lt;Predicate&gt;;
	 ^
    &#x2F;&#x2F; type K &#x3D; boolean     <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>如果直接把函数名作为参数传递给 <code>ReturnType</code>，那么我们会看到一个指示性错误：</p><pre class="line-numbers language-ts" data-language="ts"><code class="language-ts">function f() &#123;
  return &#123; x: 10, y: 3 &#125;;
&#125;
type P &#x3D; ReturnType&lt;f&gt;;
				  ^	
&#x2F;&#x2F; &#39;f&#39; refers to a value, but is being used as a type here. Did you mean &#39;typeof f&#39;?<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>记住，值和类型是不一样的，这里应该传入类型而不是值，因此我们可以改用 <code>typeof</code> 去引用值 <code>f</code> 的类型：</p><pre class="line-numbers language-ts" data-language="ts"><code class="language-ts">function f()&#123;
    return &#123;
        x: 10,
        y: 3
    &#125;;
&#125;
type P &#x3D; ReturnType&lt;typeof f&gt;;
	 ^
   &#x2F;* type P &#x3D; &#123;
    	x: number;
    	y: number;
	 &#125;            *&#x2F;   <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="限制"><a class="markdownIt-Anchor" href="#限制"></a> 限制</h4><p>TypeScript 有意限制 <code>typeof</code> 可以操作的表达式类型。具体地说，<code>tyepof</code> 只能作用于标识符（比如变量名）或者它们的属性。这可以避免让开发者编写他们认为可以执行的但实际上不能执行的代码：</p><pre class="line-numbers language-ts" data-language="ts"><code class="language-ts">&#x2F;&#x2F; 这里应该改用 &#x3D; ReturnType&lt;typeof msgbox&gt;
let shouldContinue: typeof msgbox(&quot;Are you sure you want to continue?&quot;);
							^			
&#x2F;&#x2F; &#39;,&#39; expected.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div><div class="post-nav"><div class="post-nav-prev"><a href="/2021/12/04/F-TypeScript%20%E5%AE%98%E6%96%B9%E6%89%8B%E5%86%8C%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92%E3%80%90%E5%8D%81%E4%B8%80%E3%80%91%EF%BC%9A%E7%B1%BB%E5%9E%8B%E6%93%8D%E6%8E%A7-%E6%A8%A1%E6%9D%BF%E5%AD%97%E9%9D%A2%E9%87%8F%E7%B1%BB%E5%9E%8B/" rel="prev" title="TypeScript 官方手册翻译计划【六】：类型操控-泛型"><i class="fa fa-angle-double-left"></i>&nbspTypeScript 官方手册翻译计划【六】：类型操控-泛型</a></div><div class="post-nav-next"><a href="/2021/12/03/F-TypeScript%20%E5%AE%98%E6%96%B9%E6%89%8B%E5%86%8C%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92%E3%80%90%E5%8D%81%E3%80%91%EF%BC%9A%E7%B1%BB%E5%9E%8B%E6%93%8D%E6%8E%A7-%E6%98%A0%E5%B0%84%E7%B1%BB%E5%9E%8B/" rel="next" title="TypeScript 官方手册翻译计划【十】：类型操控-映射类型">TypeScript 官方手册翻译计划【十】：类型操控-映射类型&nbsp<i class="fa fa-angle-double-right"></i></a></div><div class="clear"></div></div></article><div class="post-toc"><div class="toc-top">Contents</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#keyof-%E7%B1%BB%E5%9E%8B%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-text">Keyof 类型操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#keyof-%E7%B1%BB%E5%9E%8B%E6%93%8D%E4%BD%9C%E7%AC%A6-2"><span class="toc-text">keyof 类型操作符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#typeof-%E7%B1%BB%E5%9E%8B%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-text">Typeof 类型操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#typeof-%E7%B1%BB%E5%9E%8B%E6%93%8D%E4%BD%9C%E7%AC%A6-2"><span class="toc-text">typeof 类型操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%99%90%E5%88%B6"><span class="toc-text">限制</span></a></li></ol></li></ol></li></ol></div><div id="vcomments"></div><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script>function send_valine_Server(){var e="desp=",t=document.title,n=t.indexOf("|"),a=(t.substring(0,n),document.URL),s=new Date,l=document.getElementsByClassName("vnick vinput")[0].value||"Anonymous",i=(document.getElementsByClassName("vmail vinput")[0].value,document.getElementsByClassName("vlink vinput")[0].value,document.getElementsByClassName("veditor vinput")[0].value),o=e+"文章："+a+"\n\n昵称："+l+"\n\n留言："+i+"\n\n时间："+s.toLocaleString(),v=new XMLHttpRequest;v.open("POST","https://sc.ftqq.com/"+SCKEY_Server+".send",!0),v.setRequestHeader("Content-type","application/x-www-form-urlencoded"),v.send(title1+"&"+o)}new Valine({el:"#vcomments",appId:"c9Ume1Givsusy6VyqV87iT2z-gzGzoHsz",appKey:"5F7jhJfENet59xDteaKqobSK",notify:!1,verify:!1,placeholder:"Just talk here......",avatar:"retro",pageSize:10,visitor:!0});var title1="text=你的博客有新的评论",SCKEY_Server="SCT99005TwWJDrDKdBwQGK0YmcPRAsr4B",ValineButton=document.getElementsByClassName("vsubmit vbtn")[0];ValineButton.onclick=send_valine_Server</script></section></main><script>var user=[1,2,3,4]</script><footer class="footer"><div class="footer-info"><p>Copyright © 2018 - <span>2021</span> My Blog</p><p class="a">Powered by <a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/">Hexo</a> | Theme - <a target="_blank" rel="noopener" href="https://github.com/Chorer/hexo-theme-PureBlue">PureBlue</a></p></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"></script><script src="/js/prism.js"></script><script src="/js/navbar.js"></script><script src="/js/pace.min.js"></script><script src="/js/code.js"></script><script src="/js/load.js"></script><script src="/js/search.js"></script><script src="/js/post-except.js"></script><script src="/js/jquery.fancybox.js"></script><script src="/js/jquery.fancyboxStart.js"></script><script src="/js/toc.js"></script><script src="/js/jquery.toTop.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.2.0/dist/vanilla-back-to-top.min.js"></script><script src="/js/IndexToTop.js"></script><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5cd8f8959eacf92e"></script><script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/tororo.model.json"},display:{position:"left",width:150,height:300,vOffset:-120,hOffset:-5},mobile:{show:!1},react:{opacityDefault:1e3,opacityOnHover:1e3},log:!1})</script></body></html><!-- rebuild by neat -->