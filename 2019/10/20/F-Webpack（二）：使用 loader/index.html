<!-- build time:Mon Apr 13 2020 13:25:48 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scaleable=0" name="viewport"><title>Focus on FE learning</title><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/third%20party/jquery.fancybox.css"><link rel="stylesheet" href="/css/third%20party/pace-theme-flash.css"><link rel="icon" href="/images/kour.gif"><link href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><meta name="generator" content="Hexo 4.2.0"><link rel="stylesheet" href="/css/prism-xonokai.css" type="text/css"><link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><script src="/js/prism.js"></script><script src="/js/prism-line-numbers.min.js"></script><link rel="stylesheet" href="/css/prism-xonokai.css" type="text/css"><link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><script src="/js/prism.js"></script><script src="/js/prism-line-numbers.min.js"></script></head><body><header class="header"><div class="header_top"><span class="theme"><a href="/">Chor's blog</a></span><nav class="navbar"><ul class="menu"><li class="menu-item"><i class="fa fa-home"></i> <a href="/" class="menu-item-link">首页</a></li><li class="menu-item"><i class="fa fa-folder-open"></i> <a href="/categories" class="menu-item-link">分类</a></li><li class="menu-item"><i class="fa fa-archive"></i> <a href="/archives" class="menu-item-link">归档</a></li><li class="menu-item"><i class="fa fa-tags"></i> <a href="/tags" class="menu-item-link">标签</a></li><li class="menu-item"><i class="fa fa-user"></i> <a href="/about" class="menu-item-link">关于</a></li></ul></nav></div><i id="homelink" data-link="https://chorer.github.io/"></i><div class="header_bottom"><div class="blog-title"><a href="https://github.com/Chorer/hexo-theme-PureBlue" target="_blank" rel="noopener" class="logo">Focus on FE learning</a><div class="descrs"><div class="descr">个人博客</div><div class="descr">" Do what you love,Love what you do "</div></div><div class="blog-down"><a href="javascript:void(0);"><i class="fa fa-angle-double-down fa-2x"></i></a></div></div></div></header><main class="main"><section class="posts"><article class="post_full"><h1 class="post-title"><div class="post-title-link">Webpack（二）：使用 loader</div></h1><div class="post-info"><div class="post-date"><i class="fa fa-calendar"></i>&nbsp2019-10-20&nbsp&nbsp&nbsp</div><span class="post-words"><i class="fa fa-pencil-square-o"></i>&nbsp2.1k&nbspwords&nbsp&nbsp </span><span class="post-time"><i class="fa fa-clock-o"></i>&nbsp8 mins&nbsp&nbsp&nbsp</span><div class="post-tags"></div></div><div class="post-content"><p><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/Webpack%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E4%BD%BF%E7%94%A8%20loader/Webpack%EF%BC%9Aloader-0.png" alt=""></p><a id="more"></a><p>Webpack 提倡一切皆模块，所有类型的文件（css、图片等）都可以经过 loader 处理变成我们可加载的模块。</p><h2 id="1-loader-安装和配置"><a href="#1-loader-安装和配置" class="headerlink" title="1. loader 安装和配置"></a>1. loader 安装和配置</h2><p>安装 loader 统一方式是 <code>npm insatll xxx-loader --save -dev</code></p><p><code>-dev</code> 表示开发时依赖。</p><p><code>webpack.config.js</code> 基本配置方式：</p><pre class="line-numbers language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token operator">...</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span><span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token operator">...</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'xxx-loader'</span><span class="token punctuation">,</span><span class="token string">'xxx-loader'</span><span class="token punctuation">,</span><span class="token operator">...</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-样式处理"><a href="#2-样式处理" class="headerlink" title="2. 样式处理"></a>2. 样式处理</h2><h3 id="2-1-css-loader-和-style-loader"><a href="#2-1-css-loader-和-style-loader" class="headerlink" title="2.1 css-loader 和 style-loader"></a>2.1 css-loader 和 style-loader</h3><p>css-loader 通过 npm 安装，但是要把样式真正挂载到 dom 上，还需要安装 style-loader</p><p>通过 <code>webpack.conifg.js</code> 配置 css-loader 和 style-loader。注意 webpack 是从右向左读取的，书写顺序有要求。</p><pre class="line-numbers language-js"><code class="language-js">module<span class="token punctuation">:</span><span class="token punctuation">{</span>
  rules<span class="token punctuation">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-1-less-loader"><a href="#2-1-less-loader" class="headerlink" title="2.1 less-loader"></a>2.1 less-loader</h3><p>同样的，还可以使用 less-loader：</p><pre class="line-numbers language-js"><code class="language-js">module<span class="token punctuation">:</span><span class="token punctuation">{</span>
  rules<span class="token punctuation">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span><span class="token regex">/\.less$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span><span class="token string">"style-loader"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span><span class="token string">"css-loader"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span><span class="token string">"less-loader"</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>从 npm 3.x 开始，less 不会再随着 less-loader 的安装而自动给你安装，所以我们需要手动安装 less，也就是完整命令：<code>npm install less less-loader --save -dev</code>，否则后续打包会报错。</p><h2 id="3-图片打包"><a href="#3-图片打包" class="headerlink" title="3. 图片打包"></a>3. 图片打包</h2><p>和图片打包相关的两个 loader ，一个是 url-loader，一个是 file-loader。</p><p>如果图片较多，会发送很多 http 请求，降低页面性能。因此，url-loader 会将引入的图片编码，生成 base64 的 dataURL —— 相当于把图片数据翻译成一串字符，再把这串字符打包到文件中，最终只需要引入这个文件就能访问图片了。</p><p>当然，如果图片较大，编码会消耗性能，打包文件体积也会变大，因此 url-loader 提供了一个 <code>limit</code> 参数（一般是8kb），小于 <code>limit</code> 的图片依然被转为 DataURL；大于 <code>limit</code> 的图片则调用 file-loader 进行copy，并输出到 dist 文件夹中。 虽说 url-loader 封装了 file-loader，但实测如果不额外安装 file-loader 的话，在图片体积较大时打包还是会报错的，因此两个都要安装。</p><p>下面通过例子说明在 CSS 或者 JS 中使用图片时，loader 是如何处理的。</p><h3 id="2-1-css-引用"><a href="#2-1-css-引用" class="headerlink" title="2.1 css 引用"></a>2.1 css 引用</h3><p>这里我们在 src 下新建 img 文件夹，里面放 test1.jpg 和 tets2.jpg，一张大于8kb，一张小于8kb。在前面的 <code>index.css</code>文件中，我们像往常一样使用图片作为背景：</p><pre class="line-numbers language-css"><code class="language-css"><span class="token selector">div</span><span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span><span class="token number">100</span>px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span><span class="token number">200</span>px<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span><span class="token url">url("../img/test1.jpg")</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>之后打包发现报错，所以我们安装 url-loader，再次打包。浏览器查看：</p><p><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/Webpack%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E4%BD%BF%E7%94%A8%20loader/Webpack%EF%BC%9Aloader-1.png" alt=""></p><p>会发现图片可以正常引用了，而且是以 dataURL 的形式引用的。</p><p>接着测试大于8kb的图片（修改上面代码为 test2.jpg ）。这时，如果直接打包会报错提示缺少 file-loader，所以我们这里安装一下 file-loader。</p><p>再次打包，虽说这次不报错了，但是我们发现浏览器里图片没有显示出来。看一下控制台：</p><p><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/Webpack%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E4%BD%BF%E7%94%A8%20loader/Webpack%EF%BC%9Aloader-2.png" alt=""></p><p>可以看到，路径是直接引用的图片名字，同时会看到 dist 文件夹下输出了原始图片的副本。也就是说，其实这时候 webpack 认为我们的 <code>index.html</code>文件在 dist 文件夹中，所以选择了这样的路径引用，但其实我们的 <code>index.html</code>文件在外层。同时，我们也不希望直接输出在 dist 文件夹下，最好是里面还有一个 img 文件夹，所以我们先来 <code>webpack.config.js</code> 配置一下：</p><pre class="line-numbers language-js"><code class="language-js"><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif|jpeg)$/</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
    loader<span class="token punctuation">:</span><span class="token string">"url-loader"</span><span class="token punctuation">,</span>
    options<span class="token punctuation">:</span><span class="token punctuation">{</span>
      limit<span class="token punctuation">:</span><span class="token number">8192</span><span class="token punctuation">,</span>
      outputPath<span class="token punctuation">:</span><span class="token string">'img'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这里就设置了图片的输出路径，另外，图片默认以 32 位 hash 命名，这样太长了，而且也不知道具体是哪张图片，所以我们顺便配置一下图片命名规则：</p><pre class="line-numbers language-js"><code class="language-js"><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif|jpeg)$/</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
    loader<span class="token punctuation">:</span><span class="token string">"url-loader"</span><span class="token punctuation">,</span>
    options<span class="token punctuation">:</span><span class="token punctuation">{</span>
      limit<span class="token punctuation">:</span><span class="token number">8192</span><span class="token punctuation">,</span>
      outputPath<span class="token punctuation">:</span><span class="token string">'img'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span><span class="token string">'[name].[hash:8].[ext]'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>再次打包，打开控制台：</p><p><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/Webpack%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E4%BD%BF%E7%94%A8%20loader/Webpack%EF%BC%9Aloader-3.png" alt=""></p><p>可以看到，命名正确了，文件输出方式也正确了（dist 下多出一个 img 文件夹），但是图片路径还是错的，所以不显示图片。我们接着来配置一下图片路径。<br>我们前面说过，webpack 认为 <code>index.html</code> 在 dist 文件夹中，所以才会直接通过图片名字引用图片。那么 <code>index.html</code> 实际上是在 dist 文件夹外面的，对于 <code>index.html</code> 来说，它就要通过 <code>./dist/img</code> 才能顺利找到图片，也就是说，我们可以在原本路径（图片名）的基础上加一个固定前缀（./dist/img），使之正确指向图片位置（./dist/img/图片名）。</p><p>而 <code>publicPath</code> 正是可以用来做这件事的：</p><pre class="line-numbers language-js"><code class="language-js"><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif|jpeg)$/</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
    loader<span class="token punctuation">:</span><span class="token string">"url-loader"</span><span class="token punctuation">,</span>
    options<span class="token punctuation">:</span><span class="token punctuation">{</span>
      limit<span class="token punctuation">:</span><span class="token number">8192</span><span class="token punctuation">,</span>
      outputPath<span class="token punctuation">:</span><span class="token string">'img'</span><span class="token punctuation">,</span>
      publicPath<span class="token punctuation">:</span><span class="token string">'./dist/img'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span><span class="token string">'[name].[hash:8].[ext]'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>publicPath</code> 会给使用了相对路径引用的图片加上统一前缀。比如我们的图片路径一开始是 <code>img/test2.95a05a82.jpg</code>，那么使用了 <code>publicPath</code> 后，图片路径就变成 <code>./dist/img/test2.95a05a82.jpg</code>。通常可以给 <code>publicPath</code> 配置一个 cdn 地址前缀，比如 <code>https://xxx.cdn.com</code>，上线的时候图片就都统一使用 cdn 地址了。</p><p>那么配置好后再次打包，浏览器查看：</p><p><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/Webpack%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E4%BD%BF%E7%94%A8%20loader/Webpack%EF%BC%9Aloader-4.png" alt=""></p><p>路径正常，而且图片也正常显示了。</p><p>另外，我们也可以选择给 <code>output.publicPath</code> 配置 <code>./dist/</code>，这样的话不止是图片，所有使用相对路径引用的静态资源都会加上这个前缀了。不过要注意，这个前缀需要加一个 <code>/</code>，而图片的 <code>publicPath</code> 是不需要的。</p><h3 id="2-2-js-引用"><a href="#2-2-js-引用" class="headerlink" title="2.2 js 引用"></a>2.2 js 引用</h3><p>js 中引用图片需要使用 require，举个例子：</p><pre class="line-numbers language-js"><code class="language-js"><span class="token comment" spellcheck="true">// module2.js</span>

<span class="token comment" spellcheck="true">// require 拿到图片路径字符串</span>
<span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../img/test2.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 模板字符串构建 img 标签</span>
<span class="token keyword">export</span> <span class="token keyword">var</span> demo <span class="token operator">=</span> <span class="token template-string"><span class="token string">`&lt;img src="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>img<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"/>`</span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-js"><code class="language-js"><span class="token comment" spellcheck="true">// main.js</span>
<span class="token keyword">import</span> demo <span class="token keyword">from</span> <span class="token string">'./js/module2.js'</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> demo<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>只管根据图片和 <code>module2.js</code> 的路径关系正常引入图片即可，后面路径会被正确替换。<br>如果我们之前没有配置 <code>publicPath</code> 的话，会发现打包后的路径是 <code>img/test2.95a05a82.jpg</code>，也即 <code>index.html</code> 依然被当作是位于 dist 文件夹下的。因为我们前面配置了，所以这里路径是正确的，最后可以正常显示图片：</p><p><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/Webpack%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E4%BD%BF%E7%94%A8%20loader/Webpack%EF%BC%9Aloader-5.png" alt=""></p><h2 id="4-Babel-转译"><a href="#4-Babel-转译" class="headerlink" title="4. Babel 转译"></a>4. Babel 转译</h2><p>命令行安装：</p><pre class="line-numbers language-cmd"><code class="language-cmd">npm install --save -dev babel-loader@7 babel-core babel-preset-es2015
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>配置 <code>webpack.config.js</code>：</p><pre class="line-numbers language-js"><code class="language-js">module<span class="token punctuation">:</span><span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            test<span class="token punctuation">:</span><span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
            exclude<span class="token punctuation">:</span><span class="token regex">/(node_modules|bower_components)/</span><span class="token punctuation">,</span>
            use<span class="token punctuation">:</span><span class="token punctuation">{</span>
                loader<span class="token punctuation">:</span><span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
                options<span class="token punctuation">:</span><span class="token punctuation">{</span>
                    presets<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'es2015'</span><span class="token punctuation">]</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>exclude:/(node_modules|bower_components)/</code> 表示不转译 <code>node_modules</code> 文件夹中的 js 。</p><p><strong>babel-loader 的预设：</strong></p><ul><li><code>babel-preset-es2015</code>， <code>babel-preset-es2016</code> 等：支持不同版本的ECMAScript规范；</li><li><code>babel-preset-latest</code>： 支持现有所有 ECMAScript 版本的新特性，包括处于stage 4里的特性（已经确定的规范，将被添加到下个年度的）。</li><li><code>babel-preset-env</code>：但很多时候我们需要更灵活的 preset —— 比如大部分浏览器已经支持了 ES6 的某个特性，那么对于这个特性我们其实是不必去转译的，但前面所说的那些 preset 会一概转译。所以这里还提供了 <code>babel-preset-env</code>，它可以根据我们指定的目标环境（比如某个版本的浏览器）来选择它不支持的特性进行转译。</li></ul><h2 id="5-集成-Vue"><a href="#5-集成-Vue" class="headerlink" title="5. 集成 Vue"></a>5. 集成 Vue</h2><p>注意这不是一个开发时依赖：</p><pre class="line-numbers language-cmd"><code class="language-cmd">npm install vue@2.5.21 --save
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果遇到这个报错：</p><p><code>You are using the runtime-only build of Vue where the template compiler is not available. Either pre-compile the templates into render functions, or use the compiler-included build.</code></p><p>这是因为 Vue 有两个版本：</p><ul><li>runtime-only</li><li>runtime-compiler</li></ul><p>其中，runtime-only 版本无法编译模板，要么用 render 函数，要么修改 <code>webpack.config.js</code> 配置改用其它版本。这里我们先选择后者：</p><pre class="line-numbers language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    entry<span class="token punctuation">:</span> <span class="token operator">...</span><span class="token punctuation">,</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    resolve<span class="token punctuation">:</span><span class="token punctuation">{</span>
        alias<span class="token punctuation">:</span><span class="token punctuation">{</span>
             <span class="token string">'vue$'</span><span class="token punctuation">:</span><span class="token string">'vue/dist/vue.esm.js'</span>  <span class="token comment" spellcheck="true">// 指定版本</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>另外，webpack 还需要分别借助 vue-loader 和 vue-template-compiler 去加载和解析 .vue 文件：</p><pre class="line-numbers language-cmd"><code class="language-cmd">npm install vue-loader@13.0.0 vue-template-compiler@2.5.21 --save -dev
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>之后我们就可以编写单文件组件了（ 使用 vscode 的话强烈建议安装 vetur 插件）。</p><p><strong>Note</strong>：</p><p>因为我们安装的 vue 版本是 <a href="mailto:vue@2.5.21">vue@2.5.21</a>，所以这里的 vue-loader 和 vue-template-compiler 要注意版本对应问题，总之报错信息也写得很清楚了。</p><p>（要说为什么用这么低版本的 vue，因为视频里的项目也是用低版本 Vue 构建的，所以暂时先跟着讲师的步伐吧 =。=）</p></div><div class="post-nav"><div class="post-nav-prev"><a href="/2019/10/22/F-Webpack%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E4%BD%BF%E7%94%A8%20plugin%20%E4%BB%A5%E5%8F%8A%E6%9C%AC%E5%9C%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA/" rel="prev" title="Webpack（三）：使用 plugin 以及本地服务器搭建"><i class="fa fa-angle-double-left"></i>&nbspWebpack（三）：使用 plugin 以及本地服务器搭建</a></div><div class="post-nav-next"><a href="/2019/10/19/F-Webpack%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E5%AE%89%E8%A3%85%E5%92%8C%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/" rel="next" title="Webpack（一）：安装和基础配置">Webpack（一）：安装和基础配置&nbsp<i class="fa fa-angle-double-right"></i></a></div><div class="clear"></div></div></article><div class="post-toc"><div class="toc-top">Contents</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-loader-安装和配置"><span class="toc-text">1. loader 安装和配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-样式处理"><span class="toc-text">2. 样式处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-css-loader-和-style-loader"><span class="toc-text">2.1 css-loader 和 style-loader</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-less-loader"><span class="toc-text">2.1 less-loader</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-图片打包"><span class="toc-text">3. 图片打包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-css-引用"><span class="toc-text">2.1 css 引用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-js-引用"><span class="toc-text">2.2 js 引用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-Babel-转译"><span class="toc-text">4. Babel 转译</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-集成-Vue"><span class="toc-text">5. 集成 Vue</span></a></li></ol></div><div id="vcomments"></div><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script>new Valine({el:"#vcomments",appId:"c9Ume1Givsusy6VyqV87iT2z-gzGzoHsz",appKey:"5F7jhJfENet59xDteaKqobSK",notify:!1,verify:!1,placeholder:"Just talk here......",avatar:"mm",pageSize:10,visitor:!0})</script></section></main><script>var user=[1,2,3,4]</script><footer class="footer"><div class="footer-info"><p>Copyright © 2018 - <span>2020</span> My Blog</p><p class="a">Powered by <a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">Hexo</a> | Theme - <a href="https://github.com/Chorer/hexo-theme-PureBlue" target="_blank" rel="noopener">PureBlue</a></p></div></footer><script src="https://code.jquery.com/jquery-3.3.1.min.js"></script><script src="/js/navbar.js"></script><script src="/js/pace.min.js"></script><script src="/js/code.js"></script><script src="/js/load.js"></script><script src="/js/search.js"></script><script src="/js/post-except.js"></script><script src="/js/jquery.fancybox.js"></script><script src="/js/jquery.fancyboxStart.js"></script><script src="/js/toc.js"></script><script src="/js/jquery.toTop.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.2.0/dist/vanilla-back-to-top.min.js"></script><script src="/js/IndexToTop.js"></script><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5cd8f8959eacf92e"></script></body></html><!-- rebuild by neat -->