<!-- build time:Thu Jul 16 2020 12:12:01 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scaleable=0" name="viewport"><title>Focus on FE learning</title><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/third%20party/jquery.fancybox.css"><link rel="stylesheet" href="/css/third%20party/pace-theme-flash.css"><link rel="icon" href="/images/kour.gif"><link href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><meta name="generator" content="Hexo 4.2.0"><link rel="stylesheet" href="/css/prism-xonokai.css" type="text/css"><link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><script src="/js/prism.js"></script><script src="/js/prism-line-numbers.min.js"></script><link rel="stylesheet" href="/css/prism-xonokai.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><script src="/js/prism.js"></script>
<script src="/js/prism-line-numbers.min.js"></script></head><body><header class="header"><div class="header_top"><span class="theme"><a href="/">Chor's blog</a></span><nav class="navbar"><ul class="menu"><li class="menu-item"><i class="fa fa-home"></i> <a href="/" class="menu-item-link">首页</a></li><li class="menu-item"><i class="fa fa-folder-open"></i> <a href="/categories" class="menu-item-link">分类</a></li><li class="menu-item"><i class="fa fa-archive"></i> <a href="/archives" class="menu-item-link">归档</a></li><li class="menu-item"><i class="fa fa-tags"></i> <a href="/tags" class="menu-item-link">标签</a></li><li class="menu-item"><i class="fa fa-user"></i> <a href="/about" class="menu-item-link">关于</a></li></ul></nav></div><i id="homelink" data-link="https://chorer.github.io/"></i><div class="header_bottom"><div class="blog-title"><a href="https://github.com/Chorer/hexo-theme-PureBlue" target="_blank" rel="noopener" class="logo">Focus on FE learning</a><div class="descrs"><div class="descr">个人博客</div><div class="descr">" Do what you love,Love what you do "</div></div><div class="blog-down"><a href="javascript:void(0);"><i class="fa fa-angle-double-down fa-2x"></i></a></div></div></div></header><main class="main"><section class="posts"><article class="post_full"><h1 class="post-title"><div class="post-title-link">编译原理学习笔记-1：引论</div></h1><div class="post-info"><div class="post-date"><i class="fa fa-calendar"></i>&nbsp2020-03-14&nbsp&nbsp&nbsp</div><span class="post-words"><i class="fa fa-pencil-square-o"></i>&nbsp957&nbspwords&nbsp&nbsp </span><span class="post-time"><i class="fa fa-clock-o"></i>&nbsp3 mins&nbsp&nbsp&nbsp</span><div class="post-tags"></div></div><div class="post-content"><p><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1/CP-%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1-0.png" alt=""></p><a id="more"></a><h3 id="1-翻译程序"><a href="#1-翻译程序" class="headerlink" title="1. 翻译程序"></a>1. 翻译程序</h3><p>机器不能理解我们用高级语言编写的代码，所以要在程序执行前将高级语言“翻译”为机器语言。这是一个将<strong>源语言程序</strong>转化为<strong>目标语言程序</strong>的过程，它依靠<strong>翻译程序</strong>来完成。</p><p>翻译程序包括：</p><ul><li>编译器：将编译型语言（C++，Go）翻译为机器语言。</li><li>解释器：将解释型语言（JavaScript、Python）翻译为机器语言。</li></ul><p>编译与解释的不同：</p><p>编译和解释都可以将高级语言翻译为机器语言，不同之处在于：</p><p><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1/CP-%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1-1.png" alt=""></p><ul><li>编译是将源代码经过分析后生成语法树，再优化生成中间代码，最后生成机器码。编译的结果是生成一个可执行的二进制<strong>文件</strong>；</li><li>而解释也是将源代码经过分析后生成语法树，只不过此后它是基于语法树生成字节码，再根据字节码去执行程序。它并不会生成目标文件，更多的是一个<strong>结果</strong>。</li></ul><p>PS：JavaScript 本身是解释型语言，但是在“翻译”过程中同时有解释器和编译器（JIT）的参与。在其它文章会学习这个知识，此处不做进一步讨论。Anyway，这个系列的笔记会将重点聚焦在编译型语言上。</p><h3 id="2-编译器的演进"><a href="#2-编译器的演进" class="headerlink" title="2. 编译器的演进"></a>2. 编译器的演进</h3><h4 id="二阶段编译器（单盒模型）"><a href="#二阶段编译器（单盒模型）" class="headerlink" title="二阶段编译器（单盒模型）"></a>二阶段编译器（单盒模型）</h4><p><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1/CP-%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1-2.png" alt=""></p><p>早期的二阶段编译器，任务主要有两个，一是理解输入的源程序，二是将其功能映射到目标机上，据此将编译器内部划分为<strong>前端</strong>和<strong>后端</strong>两个模块 —— 前端负责理解，后端负责映射。前端对源代码的理解反映在 IR （intermediate representation，中间表示）这一结构中，IR 再传递给后端进行处理。</p><h4 id="三阶段编译器"><a href="#三阶段编译器" class="headerlink" title="三阶段编译器"></a>三阶段编译器</h4><p><img src="https://myblog-1258623898.cos.ap-chengdu.myqcloud.com/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1/CP-%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1-3.png" alt=""></p><p>后面出现了三阶段编译器，也就是在前后端之间增加了一个用以改进 IR 的优化器。注意：这个优化器本身是一个<strong>源到源</strong>的编译器。自此，三者的分工变为：</p><ul><li>前端：理解源程序，并将理解的结果映射到 IR 中</li><li>优化器：改进 IR 的形式</li><li>后端：将改进后的 IR 映射到目标机的有限资源上</li></ul><h3 id="3-编译步骤一览"><a href="#3-编译步骤一览" class="headerlink" title="3. 编译步骤一览"></a>3. 编译步骤一览</h3><h4 id="3-1-前端"><a href="#3-1-前端" class="headerlink" title="3.1 前端"></a>3.1 前端</h4><ul><li><p>词法分析：词法分析器（扫描器）以<strong>字符流</strong>为输入，对其进行扫描和分解，产生多个 token（单词、符号），这个过程叫做 tokenize（分词化）。接着，这些 token 被归入对应的词类，最后再输出由已归类单词构成的流（形如<code>(typeA,&quot;str1&quot;),(typeB,&quot;str2&quot;),(typeA,&quot;str3&quot;),(typeC,&quot;str4&quot;)......</code>）</p></li><li><p>语法分析：语法分析器（分析器）在词法分析的基础上，根据事先约定的语法规则，对已归类单词构成的流进行匹配，以语法单位的形式进行重组，构造并输出一棵语法树（syntax tree | | parsing tree | | derivation tree）。</p></li><li><p>语义分析与中间代码生成：语义分析与中间代码生成器基于语义规则，对语法树进行语义分析（变量是否定义，类型是否正确）和中间代码生成（三元式、四元式等）。</p></li></ul><h4 id="3-2-优化器"><a href="#3-2-优化器" class="headerlink" title="3.2 优化器"></a>3.2 优化器</h4><ul><li>中间代码优化：包括<strong>分析</strong>和<strong>转换</strong>（数据流分析、相关性分析）两个过程</li></ul><h4 id="3-3-后端"><a href="#3-3-后端" class="headerlink" title="3.3 后端"></a>3.3 后端</h4><ul><li>指令选择：将每个 IR 操作映射为一个或多个实际的目标机操作</li><li>寄存器分配：将指令选择阶段使用的虚拟寄存器映射到实际的目标机寄存器，最小化寄存器的使用</li><li>指令调度：重排代码中的各个操作，最小化等待操作数所浪费的周期数</li></ul></div><div class="post-nav"><div class="post-nav-prev"><a href="/2020/03/17/OS-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3%EF%BC%9A%E5%88%9D%E8%AF%86%E8%BF%9B%E7%A8%8B%E5%92%8C%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6/" rel="prev" title="操作系统学习笔记-3：初识进程和进程控制"><i class="fa fa-angle-double-left"></i>&nbsp操作系统学习笔记-3：初识进程和进程控制</a></div><div class="post-nav-next"><a href="/2020/03/10/OS-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1%EF%BC%9A%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/" rel="next" title="操作系统学习笔记-1：基础概念">操作系统学习笔记-1：基础概念&nbsp<i class="fa fa-angle-double-right"></i></a></div><div class="clear"></div></div></article><div class="post-toc"><div class="toc-top">Contents</div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-翻译程序"><span class="toc-text">1. 翻译程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-编译器的演进"><span class="toc-text">2. 编译器的演进</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#二阶段编译器（单盒模型）"><span class="toc-text">二阶段编译器（单盒模型）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#三阶段编译器"><span class="toc-text">三阶段编译器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-编译步骤一览"><span class="toc-text">3. 编译步骤一览</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-前端"><span class="toc-text">3.1 前端</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-优化器"><span class="toc-text">3.2 优化器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-后端"><span class="toc-text">3.3 后端</span></a></li></ol></li></ol></div><div id="vcomments"></div><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script>new Valine({el:"#vcomments",appId:"c9Ume1Givsusy6VyqV87iT2z-gzGzoHsz",appKey:"5F7jhJfENet59xDteaKqobSK",notify:!1,verify:!1,placeholder:"Just talk here......",avatar:"mm",pageSize:10,visitor:!0})</script></section></main><script>var user=[1,2,3,4]</script><footer class="footer"><div class="footer-info"><p>Copyright © 2018 - <span>2020</span> My Blog</p><p class="a">Powered by <a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">Hexo</a> | Theme - <a href="https://github.com/Chorer/hexo-theme-PureBlue" target="_blank" rel="noopener">PureBlue</a></p></div></footer><script src="https://code.jquery.com/jquery-3.3.1.min.js"></script><script src="/js/navbar.js"></script><script src="/js/pace.min.js"></script><script src="/js/code.js"></script><script src="/js/load.js"></script><script src="/js/search.js"></script><script src="/js/post-except.js"></script><script src="/js/jquery.fancybox.js"></script><script src="/js/jquery.fancyboxStart.js"></script><script src="/js/toc.js"></script><script src="/js/jquery.toTop.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.2.0/dist/vanilla-back-to-top.min.js"></script><script src="/js/IndexToTop.js"></script><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5cd8f8959eacf92e"></script></body></html><!-- rebuild by neat -->